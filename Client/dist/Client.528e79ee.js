let e;var t,s,i,a,r,n,o,l,d,c,h,u,m,p,_,g=globalThis;function y(e){return e&&e.__esModule?e.default:e}var v={},f={},b=function(e){return e&&e.Math===Math&&e};f=b("object"==typeof globalThis&&globalThis)||b("object"==typeof window&&window)||b("object"==typeof self&&self)||b("object"==typeof g&&g)||b("object"==typeof f&&f)||function(){return this}()||Function("return this")();var w={},D={};w=!(D=function(e){try{return!!e()}catch(e){return!0}})(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]});var C={},k={};k=!D(function(){var e=(function(){}).bind();return"function"!=typeof e||e.hasOwnProperty("prototype")});var E=Function.prototype.call;C=k?E.bind(E):function(){return E.apply(E,arguments)};var S={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor;i=T&&!S.call({1:2},1)?function(e){var t=T(this,e);return!!t&&t.enumerable}:S;var L={};L=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}};var $={},M={},x={},I=Function.prototype,A=I.call,F=k&&I.bind.bind(A,A),H={},O=(x=k?F:function(e){return function(){return A.apply(e,arguments)}})({}.toString),R=x("".slice);H=function(e){return R(O(e),8,-1)};var P=Object,N=x("".split);M=D(function(){return!P("z").propertyIsEnumerable(0)})?function(e){return"String"===H(e)?N(e,""):P(e)}:P;var U={},j={};j=function(e){return null==e};var V=TypeError;U=function(e){if(j(e))throw new V("Can't call method on "+e);return e},$=function(e){return M(U(e))};var q={},G={},B={},Y={},K="object"==typeof document&&document.all;Y=void 0===K&&void 0!==K?function(e){return"function"==typeof e||e===K}:function(e){return"function"==typeof e},B=function(e){return"object"==typeof e?null!==e:Y(e)};var W={},z={};z=function(e,t){var s;return arguments.length<2?(s=f[e],Y(s)?s:void 0):f[e]&&f[e][t]};var J={};J=x({}.isPrototypeOf);var X={},Q={},Z={},ee={},et=f.navigator,es=et&&et.userAgent;ee=es?String(es):"";var ei=f.process,ea=f.Deno,er=ei&&ei.versions||ea&&ea.version,en=er&&er.v8;en&&(r=(a=en.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!r&&ee&&(!(a=ee.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=ee.match(/Chrome\/(\d+)/))&&(r=+a[1]),Z=r;var eo=f.String;X=(Q=!!Object.getOwnPropertySymbols&&!D(function(){var e=Symbol("symbol detection");return!eo(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Z&&Z<41}))&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var el=Object;W=X?function(e){return"symbol"==typeof e}:function(e){var t=z("Symbol");return Y(t)&&J(t.prototype,el(e))};var ed={},ec={},eh={},eu=String;eh=function(e){try{return eu(e)}catch(e){return"Object"}};var em=TypeError;ec=function(e){if(Y(e))return e;throw new em(eh(e)+" is not a function")},ed=function(e,t){var s=e[t];return j(s)?void 0:ec(s)};var ep={},e_=TypeError;ep=function(e,t){var s,i;if("string"===t&&Y(s=e.toString)&&!B(i=C(s,e))||Y(s=e.valueOf)&&!B(i=C(s,e))||"string"!==t&&Y(s=e.toString)&&!B(i=C(s,e)))return i;throw new e_("Can't convert object to primitive value")};var eg={},ey={},ev={},ef={};ef=!1;var eb={},ew=Object.defineProperty;eb=function(e,t){try{ew(f,e,{value:t,configurable:!0,writable:!0})}catch(s){f[e]=t}return t};var eD="__core-js_shared__",eC=ev=f[eD]||eb(eD,{});(eC.versions||(eC.versions=[])).push({version:"3.42.0",mode:ef?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"}),ey=function(e,t){return ev[e]||(ev[e]=t||{})};var ek={},eE={},eS=Object;eE=function(e){return eS(U(e))};var eT=x({}.hasOwnProperty);ek=Object.hasOwn||function(e,t){return eT(eE(e),t)};var eL={},e$=0,eM=Math.random(),ex=x(1..toString);eL=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ex(++e$+eM,36)};var eI=f.Symbol,eA=ey("wks"),eF=X?eI.for||eI:eI&&eI.withoutSetter||eL,eH=TypeError,eO=function(e){return ek(eA,e)||(eA[e]=Q&&ek(eI,e)?eI[e]:eF("Symbol."+e)),eA[e]}("toPrimitive");G=function(e,t){if(!B(e)||W(e))return e;var s,i=ed(e,eO);if(i){if(void 0===t&&(t="default"),s=C(i,e,t),!B(s)||W(s))return s;throw new eH("Can't convert object to primitive value")}return void 0===t&&(t="number"),ep(e,t)},q=function(e){var t=G(e,"string");return W(t)?t:t+""};var eR={},eP={},eN=f.document,eU=B(eN)&&B(eN.createElement);eP=function(e){return eU?eN.createElement(e):{}},eR=!w&&!D(function(){return 7!==Object.defineProperty(eP("div"),"a",{get:function(){return 7}}).a});var ej=Object.getOwnPropertyDescriptor;s=w?ej:function(e,t){if(e=$(e),t=q(t),eR)try{return ej(e,t)}catch(e){}if(ek(e,t))return L(!C(i,e,t),e[t])};var eV={},eq={};eq=w&&D(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var eG={},eB=String,eY=TypeError;eG=function(e){if(B(e))return e;throw new eY(eB(e)+" is not an object")};var eK=TypeError,eW=Object.defineProperty,ez=Object.getOwnPropertyDescriptor,eJ="enumerable",eX="configurable",eQ="writable";n=w?eq?function(e,t,s){if(eG(e),t=q(t),eG(s),"function"==typeof e&&"prototype"===t&&"value"in s&&eQ in s&&!s[eQ]){var i=ez(e,t);i&&i[eQ]&&(e[t]=s.value,s={configurable:eX in s?s[eX]:i[eX],enumerable:eJ in s?s[eJ]:i[eJ],writable:!1})}return eW(e,t,s)}:eW:function(e,t,s){if(eG(e),t=q(t),eG(s),eR)try{return eW(e,t,s)}catch(e){}if("get"in s||"set"in s)throw new eK("Accessors not supported");return"value"in s&&(e[t]=s.value),e},eV=w?function(e,t,s){return n(e,t,L(1,s))}:function(e,t,s){return e[t]=s,e};var eZ={},e0={},e1={},e2=Function.prototype,e4=w&&Object.getOwnPropertyDescriptor,e3=ek(e2,"name"),e7=e3&&(!w||w&&e4(e2,"name").configurable),e5={},e6=x(Function.toString);Y(ev.inspectSource)||(ev.inspectSource=function(e){return e6(e)}),e5=ev.inspectSource;var e8={},e9={},te=f.WeakMap;e9=Y(te)&&/native code/.test(String(te));var tt={},ts=ey("keys");tt=function(e){return ts[e]||(ts[e]=eL(e))};var ti={};ti={};var ta="Object already initialized",tr=f.TypeError,tn=f.WeakMap;if(e9||ev.state){var to=ev.state||(ev.state=new tn);to.get=to.get,to.has=to.has,to.set=to.set,o=function(e,t){if(to.has(e))throw new tr(ta);return t.facade=e,to.set(e,t),t},l=function(e){return to.get(e)||{}},d=function(e){return to.has(e)}}else{var tl=tt("state");ti[tl]=!0,o=function(e,t){if(ek(e,tl))throw new tr(ta);return t.facade=e,eV(e,tl,t),t},l=function(e){return ek(e,tl)?e[tl]:{}},d=function(e){return ek(e,tl)}}var td=(e8={set:o,get:l,has:d,enforce:function(e){return d(e)?l(e):o(e,{})},getterFor:function(e){return function(t){var s;if(!B(t)||(s=l(t)).type!==e)throw new tr("Incompatible receiver, "+e+" required");return s}}}).enforce,tc=e8.get,th=String,tu=Object.defineProperty,tm=x("".slice),tp=x("".replace),t_=x([].join),tg=w&&!D(function(){return 8!==tu(function(){},"length",{value:8}).length}),ty=String(String).split("String"),tv=e0=function(e,t,s){"Symbol("===tm(th(t),0,7)&&(t="["+tp(th(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),s&&s.getter&&(t="get "+t),s&&s.setter&&(t="set "+t),(!ek(e,"name")||e7&&e.name!==t)&&(w?tu(e,"name",{value:t,configurable:!0}):e.name=t),tg&&s&&ek(s,"arity")&&e.length!==s.arity&&tu(e,"length",{value:s.arity});try{s&&ek(s,"constructor")&&s.constructor?w&&tu(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=td(e);return ek(i,"source")||(i.source=t_(ty,"string"==typeof t?t:"")),e};Function.prototype.toString=tv(function(){return Y(this)&&tc(this).source||e5(this)},"toString"),eZ=function(e,t,s,i){i||(i={});var a=i.enumerable,r=void 0!==i.name?i.name:t;if(Y(s)&&e0(s,r,i),i.global)a?e[t]=s:eb(t,s);else{try{i.unsafe?e[t]&&(a=!0):delete e[t]}catch(e){}a?e[t]=s:n(e,t,{value:s,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e};var tf={},tb={},tw={},tD={},tC={},tk={},tE={},tS=Math.ceil,tT=Math.floor;tE=Math.trunc||function(e){var t=+e;return(t>0?tT:tS)(t)},tk=function(e){var t=+e;return t!=t||0===t?0:tE(t)};var tL=Math.max,t$=Math.min;tC=function(e,t){var s=tk(e);return s<0?tL(s+t,0):t$(s,t)};var tM={},tx={},tI=Math.min;tx=function(e){var t=tk(e);return t>0?tI(t,0x1fffffffffffff):0},tM=function(e){return tx(e.length)};var tA=function(e){return function(t,s,i){var a,r=$(t),n=tM(r);if(0===n)return!e&&-1;var o=tC(i,n);if(e&&s!=s){for(;n>o;)if((a=r[o++])!=a)return!0}else for(;n>o;o++)if((e||o in r)&&r[o]===s)return e||o||0;return!e&&-1}},tF={includes:tA(!0),indexOf:tA(!1)}.indexOf,tH=x([].push);tw=function(e,t){var s,i=$(e),a=0,r=[];for(s in i)!ek(ti,s)&&ek(i,s)&&tH(r,s);for(;t.length>a;)ek(i,s=t[a++])&&(~tF(r,s)||tH(r,s));return r};var tO={},tR=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");c=Object.getOwnPropertyNames||function(e){return tw(e,tR)},h=Object.getOwnPropertySymbols;var tP=x([].concat);tb=z("Reflect","ownKeys")||function(e){var t=c(eG(e));return h?tP(t,h(e)):t},tf=function(e,t,i){for(var a=tb(t),r=0;r<a.length;r++){var o=a[r];ek(e,o)||i&&ek(i,o)||n(e,o,s(t,o))}};var tN={},tU=/#|\.prototype\./,tj=function(e,t){var s=tq[tV(e)];return s===tB||s!==tG&&(Y(t)?D(t):!!t)},tV=tj.normalize=function(e){return String(e).replace(tU,".").toLowerCase()},tq=tj.data={},tG=tj.NATIVE="N",tB=tj.POLYFILL="P";tN=tj,v=function(e,t){var i,a,r,n,o,l=e.target,d=e.global,c=e.stat;if(i=d?f:c?f[l]||eb(l,{}):f[l]&&f[l].prototype)for(a in t){if(n=t[a],r=e.dontCallGetSet?(o=s(i,a))&&o.value:i[a],!tN(d?a:l+(c?".":"#")+a,e.forced)&&void 0!==r){if(typeof n==typeof r)continue;tf(n,r)}(e.sham||r&&r.sham)&&eV(n,"sham",!0),eZ(i,a,n,e)}};var tY={},tK={},tW=Function.prototype,tz=tW.apply,tJ=tW.call;tK="object"==typeof Reflect&&Reflect.apply||(k?tJ.bind(tz):function(){return tJ.apply(tz,arguments)});var tX={},tQ={},tZ=(tQ=function(e){if("Function"===H(e))return x(e)})(tQ.bind);tX=function(e,t){return ec(e),void 0===t?e:k?tZ(e,t):function(){return e.apply(t,arguments)}};var t0={};t0=z("document","documentElement");var t1={};t1=x([].slice);var t2={},t4=TypeError;t2=function(e,t){if(e<t)throw new t4("Not enough arguments");return e};var t3={};t3=/(?:ipad|iphone|ipod).*applewebkit/i.test(ee);var t7={},t5={},t6=function(e){return ee.slice(0,e.length)===e};t7="NODE"===(t5=t6("Bun/")?"BUN":t6("Cloudflare-Workers")?"CLOUDFLARE":t6("Deno/")?"DENO":t6("Node.js/")?"NODE":f.Bun&&"string"==typeof Bun.version?"BUN":f.Deno&&"object"==typeof Deno.version?"DENO":"process"===H(f.process)?"NODE":f.window&&f.document?"BROWSER":"REST");var t8=f.setImmediate,t9=f.clearImmediate,se=f.process,st=f.Dispatch,ss=f.Function,si=f.MessageChannel,sa=f.String,sr=0,sn={},so="onreadystatechange";D(function(){u=f.location});var sl=function(e){if(ek(sn,e)){var t=sn[e];delete sn[e],t()}},sd=function(e){return function(){sl(e)}},sc=function(e){sl(e.data)},sh=function(e){f.postMessage(sa(e),u.protocol+"//"+u.host)};t8&&t9||(t8=function(e){t2(arguments.length,1);var t=Y(e)?e:ss(e),s=t1(arguments,1);return sn[++sr]=function(){tK(t,void 0,s)},m(sr),sr},t9=function(e){delete sn[e]},t7?m=function(e){se.nextTick(sd(e))}:st&&st.now?m=function(e){st.now(sd(e))}:si&&!t3?(_=(p=new si).port2,p.port1.onmessage=sc,m=tX(_.postMessage,_)):f.addEventListener&&Y(f.postMessage)&&!f.importScripts&&u&&"file:"!==u.protocol&&!D(sh)?(m=sh,f.addEventListener("message",sc,!1)):m=so in eP("script")?function(e){t0.appendChild(eP("script"))[so]=function(){t0.removeChild(this),sl(e)}}:function(e){setTimeout(sd(e),0)});var su=(tY={set:t8,clear:t9}).clear;v({global:!0,bind:!0,enumerable:!0,forced:f.clearImmediate!==su},{clearImmediate:su});var sm=tY.set,sp={},s_=f.Function,sg=/MSIE .\./.test(ee)||"BUN"===t5&&((t=f.Bun.version.split(".")).length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2]));sp=function(e,t){var s=t?2:1;return sg?function(i,a){var r=t2(arguments.length,1)>s,n=Y(i)?i:s_(i),o=r?t1(arguments,s):[],l=r?function(){tK(n,this,o)}:n;return t?e(l,a):e(l)}:e};var sy=f.setImmediate?sp(sm,!1):sm;v({global:!0,bind:!0,enumerable:!0,forced:f.setImmediate!==sy},{setImmediate:sy});var sv=function(e){var t,s=Object.prototype,i=s.hasOwnProperty,a=Object.defineProperty||function(e,t,s){e[t]=s.value},r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function d(e,t,s){return Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,s){return e[t]=s}}function c(e,s,i,r){var n,o,l,d,c=Object.create((s&&s.prototype instanceof g?s:g).prototype);return a(c,"_invoke",{value:(n=e,o=i,l=new T(r||[]),d=u,function(e,s){if(d===m)throw Error("Generator is already running");if(d===p){if("throw"===e)throw s;return{value:t,done:!0}}for(l.method=e,l.arg=s;;){var i=l.delegate;if(i){var a=function e(s,i){var a=i.method,r=s.iterator[a];if(r===t)return(i.delegate=null,"throw"===a&&s.iterator.return&&(i.method="return",i.arg=t,e(s,i),"throw"===i.method))?_:("return"!==a&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+a+"' method")),_);var n=h(r,s.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,_;var o=n.arg;return o?o.done?(i[s.resultName]=o.value,i.next=s.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,_):o:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,_)}(i,l);if(a){if(a===_)continue;return a}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(d===u)throw d=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);d=m;var r=h(n,o,l);if("normal"===r.type){if(d=l.done?p:"suspendedYield",r.arg===_)continue;return{value:r.arg,done:l.done}}"throw"===r.type&&(d=p,l.method="throw",l.arg=r.arg)}})}),c}function h(e,t,s){try{return{type:"normal",arg:e.call(t,s)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u="suspendedStart",m="executing",p="completed",_={};function g(){}function y(){}function v(){}var f={};d(f,n,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(L([])));w&&w!==s&&i.call(w,n)&&(f=w);var D=v.prototype=g.prototype=Object.create(f);function C(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var s;a(this,"_invoke",{value:function(a,r){function n(){return new t(function(s,n){!function s(a,r,n,o){var l=h(e[a],e,r);if("throw"===l.type)o(l.arg);else{var d=l.arg,c=d.value;return c&&"object"==typeof c&&i.call(c,"__await")?t.resolve(c.__await).then(function(e){s("next",e,n,o)},function(e){s("throw",e,n,o)}):t.resolve(c).then(function(e){d.value=e,n(d)},function(e){return s("throw",e,n,o)})}}(a,r,s,n)})}return s=s?s.then(n,n):n()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(e){if(null!=e){var s=e[n];if(s)return s.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function s(){for(;++a<e.length;)if(i.call(e,a))return s.value=e[a],s.done=!1,s;return s.value=t,s.done=!0,s};return r.next=r}}throw TypeError(typeof e+" is not iterable")}return y.prototype=v,a(D,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=d(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,l,"GeneratorFunction")),e.prototype=Object.create(D),e},e.awrap=function(e){return{__await:e}},C(k.prototype),d(k.prototype,o,function(){return this}),e.AsyncIterator=k,e.async=function(t,s,i,a,r){void 0===r&&(r=Promise);var n=new k(c(t,s,i,a),r);return e.isGeneratorFunction(s)?n:n.next().then(function(e){return e.done?e.value:n.next()})},C(D),d(D,l,"Generator"),d(D,n,function(){return this}),d(D,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),s=[];for(var i in t)s.push(i);return s.reverse(),function e(){for(;s.length;){var i=s.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var s in this)"t"===s.charAt(0)&&i.call(this,s)&&!isNaN(+s.slice(1))&&(this[s]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var s=this;function a(i,a){return o.type="throw",o.arg=e,s.next=i,a&&(s.method="next",s.arg=t),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],o=n.completion;if("root"===n.tryLoc)return a("end");if(n.tryLoc<=this.prev){var l=i.call(n,"catchLoc"),d=i.call(n,"finallyLoc");if(l&&d){if(this.prev<n.catchLoc)return a(n.catchLoc,!0);else if(this.prev<n.finallyLoc)return a(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return a(n.catchLoc,!0)}else if(d){if(this.prev<n.finallyLoc)return a(n.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var n=r?r.completion:{};return(n.type=e,n.arg=t,r)?(this.method="next",this.next=r.finallyLoc,_):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.finallyLoc===e)return this.complete(s.completion,s.afterLoc),S(s),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.tryLoc===e){var i=s.completion;if("throw"===i.type){var a=i.arg;S(s)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,s,i){return this.delegate={iterator:L(e),resultName:s,nextLoc:i},"next"===this.method&&(this.arg=t),_}},e}({});try{regeneratorRuntime=sv}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=sv:Function("r","regeneratorRuntime = r")(sv)}const sf="http://localhost:3000/api",sb=async function(){try{let e=await fetch(`${sf}/user/health`);if(!e.ok)return{success:!1};return await e.json()}catch(e){console.error("Server not connected")}};var sw=new class{_accessToken;_curUser;_removeCurUserInfo(){this._accessToken=null,this._curUser=null}async _apiCall(e,t){try{let s;return s=await fetch(`${sf}${e}`,t),(403===s.status||401===s.status)&&(await this._refreshAccessToken(),s=await fetch(`${sf}${e}`,t)),s}catch(e){throw console.error("Error while using _apiCall",e),e}}async _refreshAccessToken(){try{let e=await this._apiCall("/user/refresh",{method:"POST",credentials:"include"});if(!e.ok)throw Error("Refresh failed");let t=await e.json();return this._accessToken=t.accessToken,t.accessToken}catch(e){throw console.error("Error while refreshing token:",e),e}}async login(e,t){try{let s=await this._apiCall("/user/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:t})}),i=await s.json();if(!s.ok){let e=Error(i.message);throw e.statusCode=s.status,e}this._accessToken=i.accessToken,this._curUser=await this.getCurrentUser();let a=this._calcRemainingDays("goals"),r=this._calcRemainingDays("rooms"),n=this._curUser.rooms.length&&this._curUser.rooms.map(e=>e.roomId),o=n&&await this._getRooms(n);await this.updateUser({remainingDaysNow:a,remainingDaysNowRooms:r,rooms:o});let l=this._calcHowManyTimesClick("goals"),d=this._calcHowManyTimesClick("rooms");return await this.updateUser({howManyTimesClick:l,howManyTimesClickRooms:d}),i.message}catch(e){throw e}}async createUser({email:e,...t}){try{let s=e?{...t,email:e}:{...t},i=await this._apiCall("/user/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}),a=await i.json();if(!i.ok){let e=Error(a.message);throw e.statusCode=i.status,e.name=a.name,e}return this._accessToken=a.accessToken,this._curUser=await this.getCurrentUser(),a.message}catch(e){throw e}}async getCurrentUser(){try{this._accessToken||await this._refreshAccessToken();let e=await this._apiCall("/user/get",{headers:{Authorization:`Bearer ${this._accessToken}`},credentials:"include"}),t=await e.json();if(!e.ok)return{success:!1,message:t.message,statusCode:e.status};return t.user}catch(e){return console.error(e),null}}async updateUser(e){try{this._accessToken||await this._refreshAccessToken();let t=await this._apiCall("/user/update/general",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._accessToken}`},credentials:"include",body:JSON.stringify(e)}),s=await t.json();if(!t.ok){let e=Error(s.message);throw e.statusCode=t.status,e.name=s.name,e}return this._curUser=s.user,s}catch(e){throw e}}async logout(){try{let e=await this._apiCall("/user/logout",{method:"POST",headers:{Authorization:`Bearer ${this._accessToken}`},credentials:"include"}),t=await e.json();if(!e.ok)return{success:!1,message:t.message,statusCode:e.status};this._removeCurUserInfo()}catch(e){throw e}}async deleteUser(e){try{this._accessToken||await this._refreshAccessToken();let t=await this._apiCall("/user/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._accessToken}`},credentials:"include",body:JSON.stringify({password:e})}),s=await t.json();if(!t.ok)return{success:!1,message:s.message,statusCode:t.status};return this._curUser=null,s.message}catch(e){return console.error(e),null}}async saveToDoListsComments(e,t,s,i,a){try{let r,n="goals"===e?this._curUser.goals[t]:this._curUser.rooms[t];if(s||""===s){let{toDoLists:e,toDoListsCheckbox:t,...a}=n;r={toDoLists:s,toDoListsCheckbox:i||[],...a}}if(a||""===a){let{comments:e,...t}=n;r={comments:a,...t}}if("goals"===e){let e=this._curUser.goals.toSpliced(t,1,r);await this.updateUser({goals:e})}if("rooms"===e){let e=this._curUser.rooms.toSpliced(t,1,r);await this.updateUser({rooms:e});let n=this._curUser.rooms[t].roomId;s||""===s?await this.updateRoom(n,{toDoLists:s,toDoListsCheckbox:i||[]}):await this.updateRoom(n,{comments:a})}console.log("To-Do lists / comments saved successfully!")}catch(e){throw e}}async saveGoalsInfo(e){try{let t="goals",s=[...this._curUser.remainingDaysPrev,...this._calcRemainingDays(t,e)],i=[...this._curUser.remainingDaysNow,...this._calcRemainingDays(t,e)];return await this.updateUser({goals:[...this._curUser.goals,...e],remainingDaysPrev:s,remainingDaysNow:i}),await this._changeOrders(t),await this.saveHowManyTimesClick(t),{message:`${t.at(0).toUpperCase+t.slice(1)} updated successfully!`}}catch(e){throw e}}async saveRoomsInfo(e,t){try{let s="rooms",i=await this.findUsersRooms(e,t);"id"!==t&&await this._roomsCreateSelect(s,e,i),"id"===t&&await this._roomsJoinId(s,e,i),await this._changeOrders(s),await this.saveHowManyTimesClick(s)}catch(e){throw e}}async _roomsCreateSelect(e,t,s){try{let i=t.map(function(e,t){return{...e,usernames:s[t]}});await this.createRooms(i);let a=[...this._curUser.remainingDaysPrevRooms,...this._calcRemainingDays(e,t)],r=[...this._curUser.remainingDaysNowRooms,...this._calcRemainingDays(e,t)];await this.updateUser({rooms:[...this._curUser.rooms,...i],remainingDaysPrevRooms:a,remainingDaysNowRooms:r})}catch(e){throw e}}async _roomsJoinId(e,t,s){try{for(let e of t)await this.updateRoom(e,{usernames:s});let i=await this._getRooms(t),a=[...this._curUser.remainingDaysPrevRooms,...this._calcRemainingDays(e,i)],r=[...this._curUser.remainingDaysNowRooms,...this._calcRemainingDays(e,i)];await this.updateUser({rooms:[...this._curUser.rooms,...i],remainingDaysPrevRooms:a,remainingDaysNowRooms:r})}catch(e){throw e}}async createRooms(e){try{let t=[];for(let s=0;s<e.length;s++){let i=e[s],a=await this._apiCall("/room/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),r=await a.json();if(!a.ok){let e=Error(r.message);throw e.statusCode=a.status,e}t.push(r.room)}return{message:"Room created successfully",rooms:t}}catch(e){throw console.error("Error while creaing room",e),e}}async _getRooms(e){try{this._accessToken||await this._refreshAccessToken();let t=[];for(let s of e){let e=await this._apiCall(`/room/${s}`,{headers:{Authorization:`Bearer ${this._accessToken}`},credentials:"include"}),i=await e.json();if(!e.ok){let t=Error(i.message);throw t.statusCode=e.status,t}t.push(i.room)}return t}catch(e){throw console.error("Error while getting rooms with ids"),e}}async findUsersRooms(e,t){try{let s=[],i=Array.isArray(e)?e:[e];for(let e of"id"===t?i:i.map(e=>e.roomId)){let t=await this._apiCall(`/room/findUsers/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await t.json();if(!t.ok){let e=Error(i.message);throw e.statusCode=t.status,e}s.push(...i.usernames,this._curUser.username)}return s}catch(e){throw console.error("Error while finding users for room",e),e}}async updateRoom(e,t){try{this._accessToken||await this._refreshAccessToken();let s=await this._apiCall(`/room/update/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._accessToken}`},credentials:"include",body:JSON.stringify(t)}),i=await s.json();if(!s.ok){let e=Error(i.message);throw e.statusCode=s.status,e}return i.room}catch(e){throw e}}async editGoalRoom(e,t,s){try{if("goals"===s){let i=this._curUser.goals.fill(t,e,e+1),a=this._curUser.remainingDaysPrev.fill(...this._calcRemainingDays(s,t),e,e+1),r=this._curUser.remainingDaysNow.fill(...this._calcRemainingDays(s,t),e,e+1);await this.updateUser({goals:i,remainingDaysPrev:a,remainingDaysNow:r})}if("rooms"===s){let i=this._curUser.rooms.fill(t,e,e+1),a=this._curUser.remainingDaysPrevRooms.fill(...this._calcRemainingDays(s,t),e,e+1),r=this._curUser.remainingDaysNowRooms.fill(...this._calcRemainingDays(s,t),e,e+1);await this.updateUser({rooms:i,remainingDaysPrevRooms:a,remainingDaysNowRooms:r}),await this.updateRoom(t.roomId,t)}await this._changeOrders(s),await this.saveHowManyTimesClick(s)}catch(e){throw e}}async deleteGoal(e){try{let t=this._curUser.goals.toSpliced(e,1),s=this._curUser.remainingDaysPrev.toSpliced(e,1),i=this._curUser.remainingDaysNow.toSpliced(e,1),a=this._curUser.howManyTimesClick.toSpliced(e,1);await this.updateUser({goals:t,remainingDaysPrev:s,remainingDaysNow:i,howManyTimesClick:a})}catch(e){throw e}}async deleteRoom(e){try{let t=this._curUser.rooms[e],s=t.roomId,i=t.usernames.filter(e=>e!==this._curUser.username);i.length?await this.updateRoom(s,{usernames:i}):await this.deleteRoomDatabase(s);let a=this._curUser.rooms.toSpliced(e,1),r=this._curUser.remainingDaysPrevRooms.toSpliced(e,1),n=this._curUser.remainingDaysNowRooms.toSpliced(e,1),o=this._curUser.howManyTimesClickRooms.toSpliced(e,1);await this.updateUser({rooms:a,remainingDaysPrevRooms:r,remainingDaysNowRooms:n,howManyTimesClickRooms:o})}catch(e){throw e}}async deleteRoomDatabase(e){try{this._accessToken||await this._refreshAccessToken();let t=await this._apiCall(`/room/delete/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${this._accessToken}`},credentials:"include"}),s=await t.json();if(!t.ok){let e=Error(s.message);throw e.statusCode=t.status,e}return s}catch(e){throw e}}async removeSelected(e){try{let t=this._curUser.goals.findIndex(t=>t===e),{selected:s,...i}=e,a=this._curUser.goals.fill({...i},t,t+1);await this.updateUser({goals:a})}catch(e){throw e}}async saveSelectedGoals(e){try{let t=this._curUser.goals;e.forEach(e=>t=this._curUser.goals.fill({...this._curUser.goals[e],selected:!0},e,e+1)),await this.updateUser({goals:t})}catch(e){throw e}}_calcRemainingDays(e,t){let s;return t&&(s=Array.isArray(t)?t:[t]),t||(s="goals"===e?this._curUser.goals:this._curUser.rooms),s.map(e=>e.date?Math.ceil((new Date(e.date)-new Date)/864e5):void 0)}async updateRemainingDaysPrev(e){try{return"goals"===e?await this.updateUser({remainingDaysPrev:this._calcUpdatedRemainingDaysPrev(e)}):await this.updateUser({remainingDaysPrevRooms:this._calcUpdatedRemainingDaysPrev(e)}),`RemainingDaysPrev for ${e} updated successfully`}catch(e){throw e}}_calcUpdatedRemainingDaysPrev(e){let t="goals"===e?this._curUser.remainingDaysNow:this._curUser.remainingDaysNowRooms;return("goals"===e?this._curUser.remainingDaysPrev:this._curUser.remainingDaysPrevRooms).map((e,s)=>{let i=t[s];return e!==i?--e:e===i?e:void 0})}async saveHowManyTimesClick(e){try{return"goals"===e?await this.updateUser({howManyTimesClick:this._calcHowManyTimesClick(e)}):await this.updateUser({howManyTimesClickRooms:this._calcHowManyTimesClick(e)}),`howManyTimesClick for ${e} updated successfully`}catch(e){throw e}}_calcHowManyTimesClick(e){let t="goals"===e?this._curUser.remainingDaysNow:this._curUser.remainingDaysNowRooms;return("goals"===e?this._curUser.remainingDaysPrev:this._curUser.remainingDaysPrevRooms).map((e,s)=>{let i=t[s];return e===i?0:e-i})}async _changeOrders(e="goals"){try{let t="goals"===e?this._curUser.goals:this._curUser.rooms,s=this._changeOrderGoals(t),[i,a]=this._changeOrderRemainingDays(t,s,e);return"goals"===e&&(await this.updateUser({goals:s}),await this.updateUser({remainingDaysPrev:i,remainingDaysNow:a})),"rooms"===e&&(await this.updateUser({rooms:s}),await this.updateUser({remainingDaysPrevRooms:i,remainingDaysNowRooms:a})),{message:`${e.at(0).toUpperCase+e.slice(1)} and remainingDaysBoth updated successfully`}}catch(e){throw e}}_changeOrderGoals(e){let t=e.filter(e=>!e.date);return[...e.filter(e=>e.date).toSorted((e,t)=>{let s=new Date(e.date),i=new Date(t.date);return s.getFullYear()+`${s.getMonth()}`.padStart(2,0)+`${s.getDate()}`.padStart(2,0)-(i.getFullYear()+`${i.getMonth()}`.padStart(2,0)+`${i.getDate()}`.padStart(2,0))}),...t]}_changeOrderRemainingDays(e,t,s){let i="goals"===s?this._curUser.remainingDaysNow:this._curUser.remainingDaysNowRooms,a="goals"===s?this._curUser.remainingDaysPrev:this._curUser.remainingDaysPrevRooms,r=Array(a.length),n=Array(i.length);return e.forEach((e,s)=>{let o=t.findIndex(t=>t===e);r.fill(a[s],o,o+1),n.fill(i[s],o,o+1)}),[r,n]}async _updateUsernameEmail(e,t){try{return(await this.updateUser("username"===t?{username:e}:{email:e})).updatedFields}catch(e){throw e}}async _updatePassword(e,t){try{let s=await this._apiCall("/user/update/password",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._accessToken}`},credentials:"include",body:JSON.stringify({curPassword:e,newPassword:t})}),i=await s.json();if(!s.ok){let e=Error(i.message);throw e.statusCode=s.status,e}return i.message}catch(e){throw e}}async deleteAll(){try{let e=await this._deleteAllUsers(),t=await this._deleteAllTokens(),s=await this._deleteAllRooms();console.log("deletedUsers",e),console.log("deletedTokens",t),console.log("deletedRooms",s)}catch(e){console.error("Error while deleting Users, tokens, and Rooms",e)}}async _deleteAllUsers(){try{let e=await this._apiCall("/user/deleteAll",{method:"DELETE"});return await e.json()}catch(e){throw e}}async _deleteAllTokens(){try{let e=await this._apiCall("/user/deleteTokens",{method:"DELETE"});return await e.json()}catch(e){throw e}}async _deleteAllRooms(){try{let e=await this._apiCall("/room/deleteAll",{method:"DELETE"});return await e.json()}catch(e){throw e}}};!async function(){console.log(await sb())}();class sD{open(e=this._parentElement){e.classList.remove("hidden")}close(e=this._parentElement){e.classList.add("hidden")}openSlow(e=this._parentElement){e.style.opacity=1}closeSlow(e=this._parentElement){e.style.opacity=0}_clearInputField(e){e.value=""}_clearHTML(e){e.innerHTML=""}renderToParentEle(e){e&&(this._data=e);let t=this._generateMarkup();this._clearHTML(this._parentElement),this._parentElement.insertAdjacentHTML("afterbegin",t)}renderPartialToParentEle(e,t){t&&(this._data=t);let s=this._generateMarkup();this._parentElement.insertAdjacentHTML(e,s)}renderInit(e){e&&(this._data=e);let t=this._generateMarkup();this._clearHTML(this._renderInitContainer),this._renderInitContainer.insertAdjacentHTML("afterbegin",t)}render(e,t){this._clearHTML(e),e.insertAdjacentHTML("afterbegin",t)}renderError(e=this._errorMessage){this._messageContainer.innerHTML=e,this._messageContainer.style.backgroundColor="#fa7304",this.open(this._messageContainer)}renderMessage(e=this._message){this._messageContainer.innerHTML=e,this._messageContainer.style.backgroundColor="#a4b600",this.open(this._messageContainer)}renderErrorInputField(e){e.style.borderColor="red"}addEventRemoveErrorInputField(){this._parentElement.addEventListener("click",e=>{let t=e.target.closest("input");t&&(t.style.borderColor="#bbbbbb")})}_setTimeout(e=3){return new Promise(t=>setTimeout(t,1e3*e))}_addEventClickEscapeClose(e,t){document.addEventListener("keydown",s=>{if(!this._parentElement.classList.contains("hidden"))e(),"Escape"===s.key&&(this.close(),t&&t())})}}class sC extends sD{_parentElement=document.querySelector(".overlay--message_spinner");_messageSpinnerType;_messageType;_lastClickedForIAmSure;_message;_questionLogout="Are you sure you want to log out?";_questionCloseAccount="Are you sure you want to close your account?<br>(â ï¸ Once you close your account, you can not recover it!)";_messageCreateAcc="Welcome to Days counter \uD83D\uDE01 <br>Your account created successfully!";_messageLogout="Logged out successfully!<br>See you again soon \uD83D\uDE0A<br>Have a wonderful day!";_messageSessionTimeout="Session Timeout!<br>There were no actions for while.<br>Redirecting to the login page...";_errorMessageUnableToCopy="Something went wrong \uD83D\uDE47ââï¸<br>Unabled to copy the room ID!<br>Please manually copy it";_errorMessageInvalidId="Please enter valid Room IDs!";_errorMessageRoomAlreadyExists="Please enter Room IDs for rooms you haven't joined yet!";_errorMessageRoomNotFound="Room ID that doesn't exist was entered! Please enter valid IDs";_errorMessageLogout="Server error \uD83D\uDE47ââï¸<br>Please try this again later<br>(You will still be automatically logged out in 30 minutes)";_errorMessage="Server error \uD83D\uDE47ââï¸ <br>Please try this again later";_addEvents(){this._addEventClickX(),this._addEventClickOk()}_addEventClickX(){this._parentElement.addEventListener("click",e=>{e.preventDefault(),e.target.closest(".btn_x--message")&&this.close()})}_addEventClickOk(){this._parentElement.addEventListener("click",e=>{e.target.closest(".btn--ok")&&this.close()})}_addHandlerClickIAmSure(e=null,t=null,s=null){this._parentElement.addEventListener("click",i=>{if(i.target.closest(".btn--i_am_sure")){if(e)return e();if(t)return t();s()}})}_generateMarkup(){let e,t;return"spinner"===this._messageSpinnerType?'<div class="spinner"></div>':("question"===this._messageType&&(e="Are you sure?",t="<button class='btn--bottom btn--i_am_sure'>I'm sure</button>"),"message"===this._messageType&&(e="Success!",t=""),"error"===this._messageType&&(e="Error!",t="<button class='btn--bottom btn--ok'>OK</button>"),`
    <div class="message_container message_container--${"question"===this._messageType?"":this._messageType}">
    <button class="btn--x btn_x--message">&times;</button>
    <h3 class="message_header message_header--${"question"===this._messageType?"":this._messageType}">
      ${e}</h3>
    <p>${this._message}</p>
    ${t}
    </div>
    `)}async _asyncInit(e="spinner",t="question",s,i=null){try{if(this._messageSpinnerType=e,this._messageType=t,this._message=s,"question"===t&&(this._lastClickedForIAmSure=i),this.renderToParentEle(),this.open(),"message"!==t)return;await this._setTimeout(),this.close()}catch(e){throw e}}}var sk=new sC;class sE extends sD{_parentElement=document.querySelector(".overlay");addHandlerClickX(e){this._parentElement.addEventListener("click",function(t){t.preventDefault(),t.target.closest(".btn--x")&&e()})}addHandlerClickOutside(e){this._parentElement.addEventListener("click",function(t){("overlay"===t.target.className||"overlay_in--how_to_create"===t.target.className||t.target.closest("h1"))&&e()})}}var sS=new sE;class sT extends sD{_parentElement=document.querySelector(".page--main");_messageContainer=this._parentElement.querySelector(".warning--counter");_data;type;_errorMessage="You can not click the button anymore! <br> Wait for another day ;)";addHandlerClickCounter(e){this._parentElement.addEventListener("click",t=>{if(t.target.closest(".btn--count")){if(!Math.max(..."goals"===this.type?this._data.howManyTimesClick:this._data.howManyTimesClickRooms))return this.renderError();e(this.type)}})}_addHandlerClickHowToUse(e){this._parentElement.addEventListener("click",t=>{t.target.closest(".btn--app_explanation")&&e()})}addHandlerClickSetting(e){this._parentElement.addEventListener("click",t=>{t.target.closest(".btn--settings")&&e()})}_handleHiddenBtnWarning(){let e=this._parentElement.querySelector(".btn_warning_container");("goals"===this.type?this._data.goals.length:this._data.rooms.length)?e.classList.remove("hidden"):e.classList.add("hidden"),this._messageContainer.classList.add("hidden")}init(e){this._data=e,this._handleHiddenBtnWarning()}}var sL=new sT;class s$ extends sD{_parentElement=document.querySelector(".page--settings");_renderInitContainer=document.querySelector(".settings_form");_messageContainer;_message;_errorMessage="Please fill the field below";_data;addHandlerClickX(e){this._parentElement.addEventListener("click",function(t){t.target.closest(".settings--btn_x")&&e()})}addEventClickChange(){this._parentElement.addEventListener("click",e=>{e.target.closest(".btn--change_username")&&this._renderInputField("username"),e.target.closest(".btn--change_email")&&this._renderInputField("email"),e.target.closest(".btn--change_password")&&this._renderInputField("password"),this.addEventRemoveErrorInputField()})}addHandlerClickFinish(e,t){this._parentElement.addEventListener("click",s=>{let i,a,r,n=s.target;if(n.closest(".btn--finish")){if(n.closest(".btn--finish_password")){this._message="Password updated successfully";let t=this._parentElement.querySelector("#input--cur_password"),s=this._parentElement.querySelector("#input--new_password"),i=t.value.trim(),a=s.value.trim();return(i||this.renderErrorInputField(t),a||this.renderErrorInputField(s),i&&a)?e(i,a,t,s):this.renderError()}if(n.closest(".btn--finish_username")&&(this._message="Username updated successfully",i="username",r=(a=this._parentElement.querySelector("#input--username")).value.trim()),n.closest(".btn--finish_email")&&(this._message="Email updated successfully",i="email",r=(a=this._parentElement.querySelector("#input--email")).value.trim()),!r)return this.renderError(),this.renderErrorInputField(a);t(r,i,a)}})}_renderInputField(e){let t;if(this._messageContainer=this._parentElement.querySelector(".settings--error_message"),"password"===e)return(t=this._parentElement.querySelector(".settings--password")).innerHTML=`
        <p class="password_explanation--tiny settings--explanation_tiny">
        8 letters at minimum:  Include more than 1 uppercase, <br>1 lowercase, 1 digit, and 1 special character!</p>
        <div>
        <p>Please enter your current password</p>
        <input class="input--password" id="input--cur_password" type="password" placeholder="your current password" minLength="8">
        <button class="btn--password_visibility btn_password_visibility--settings_cur_password" type="button"></button>
        <p>Please enter your new password</p>
        <input class="input--password" id="input--new_password" type="password" placeholder="your new password" minLength="8">
        <button class="btn--password_visibility btn_password_visibility--settings_new_password" type="button"></button>
        </div>
        <button class="btn--finish btn--finish_password">Finish</button>`;"username"===e&&(t=this._parentElement.querySelector(".settings--username")),"email"===e&&(t=this._parentElement.querySelector(".settings--email")),t.innerHTML=`
    ${"username"===e?`<p class="username_explanation--tiny settings--explanation_tiny">
    Use 12 letters at maximum</p>`:""}
    <div>
    <input id="input--${e}" ${"username"===e?'type="text" maxLength="12"':'type="email"'} placeholder="your new ${e}">
    </div>
    <button class="btn--finish btn--finish_${e}">Finish</button>`,"username"===e&&(this._parentElement.querySelector(`#input--${e}`).value=this._data.username),"email"===e&&(this._parentElement.querySelector(`#input--${e}`).value=this._data.email||"")}_generateMarkup(){return`
        <p class="error_message settings--error_message hidden">??</p>
        <button class="btn--x settings--btn_x">&times;</button>
        <h1>Account information</h1>
        <h3>
          Username
        </h3>
        <div class="settings--username">
          <p>${this._data.username}</p>
          <button class="btn--change_username">Change</button>        
        </div>
        <h3>
          Email address
        </h3>
        <div class="settings--email">
          <div class="settings_email_p--outer">
            <p>${this._data.email||"No email is set"}</p>
          </div>
          <button class="btn--change_email">Change</button>        
        </div>
        <h3>Password</h3>
        <div class="settings--password">
          <button class="btn--change_password">change</button>
        </div>
    `}}var sM=new s$;class sx extends sD{_parentElement=document.querySelector(".page--login");_addHandlerClickAppExplanation(e){this._parentElement.addEventListener("click",t=>{t.target.closest(".btn--app_explanation")&&e()})}}var sI=new sx,sA=new class{_setTimeoutId;_resetSetTimeoutLogout(e=30){this._setTimeoutId&&(clearTimeout(this._setTimeoutId),this._setTimeoutLogout(e))}_setTimeoutLogout(e=30){this._setTimeoutId=setTimeout(async()=>{try{await sk._asyncInit("message","message",sk._messageSessionTimeout),await sw.logout(),ir(),sM.close(),sS.close(),sL.close(),sI.open(),this._setTimeoutId=null}catch(e){console.error(e),sk._asyncInit("message","error","Server error \uD83D\uDE47ââï¸ This screen will go to the login page automatically. "),sw._removeCurUserInfo(),ir(),sM.close(),sS.close(),sL.close(),sI.open(),this._setTimeoutId=null}},6e4*e)}};class sF{_parentElement=document.querySelector("body");_addEventClickPasswordVisibility(){this._parentElement.addEventListener("click",e=>{let t,s=e.target.closest(".btn--password_visibility");s&&(t=s.classList.contains("btn_password_visibility--settings_cur_password")?s.closest("div").querySelector("#input--cur_password"):s.classList.contains("btn_password_visibility--settings_new_password")?s.closest("div").querySelector("#input--new_password"):s.closest("form").querySelector(".input--password"),s.classList.toggle("password--visible"),t.type=s.classList.contains("password--visible")?"text":"password")})}}var sH=new sF;class sO extends sD{_parentElement=document.querySelector(".login--form");_messageContainer=document.querySelector(".login--error");_errorMessageNoInput="The field is empty! Please fill both fields!";_errorMessageWrong="This account doesn't exist! Please try again!";_resetLogingForm(){this._clearInputField(document.getElementById("login--input_username")),this._clearInputField(document.getElementById("login--input_password")),this._messageContainer.classList.add("hidden")}addHandlerSubmit(e){this._parentElement.addEventListener("submit",t=>{t.preventDefault();let s=document.getElementById("login--input_username"),i=document.getElementById("login--input_password"),a=s.value.trim(),r=i.value.trim();if(a||this.renderErrorInputField(s),r||this.renderErrorInputField(i),!a||!r)return this.addEventRemoveErrorInputField(),this.renderError(this._errorMessageNoInput);e(a,r)})}addHandlerClickForgotPassword(e){this._parentElement.addEventListener("click",function(t){t.target.closest(".link--forgot_password")&&e()})}}var sR=new sO;class sP extends sD{_parentElement=document.querySelector(".forgot_password--form");_messageContainer=document.querySelector(".forgot_password--warning");_errorMessage="Email address is required";addHandlerClickClose(e){this._parentElement.addEventListener("click",t=>{t.preventDefault(),t.target.closest(".forgot_password--btn_x")&&(this.close(this._messageContainer),e())})}addHandlerSubmit(e){this._parentElement.addEventListener("click",t=>{if(t.preventDefault(),!t.target.closest(".btn--send"))return;let s=document.getElementById("forgot_password--input_email"),i=s.value.trim();if(!i)return this.renderErrorInputField(s),this.addEventRemoveErrorInputField(),this.renderError();e(i)})}}var sN=new sP;class sU{_parentElement=document.querySelector(".btn_scroll");addHandlerClick(e){this._parentElement.addEventListener("click",t=>{let s=t.target.getAttribute("href");e(),this._scroll(s)})}_scroll(e){document.querySelector(e).scrollIntoView({behavior:"smooth"})}}var sj=new sU;class sV extends sD{_parentElement=document.querySelector(".bottom_half");_renderInitContainer=document.querySelector(".bottom_half--inputs");_messageContainer=document.querySelector(".bottom_half--warning");_errorMessage="Username and password are required!";addHandlerSubmit(e){this._parentElement.addEventListener("submit",t=>{t.preventDefault();let s=document.getElementById("bottom_half--input_username"),i=document.getElementById("bottom_half--input_password"),a=document.getElementById("bottom_half--input_email"),r=s.value?.trim(),n=i.value?.trim(),o=a.value?.trim();if(r||this.renderErrorInputField(s),n||this.renderErrorInputField(i),this.addEventRemoveErrorInputField(),!r||!n)return this.renderError();e(r,n,o),this._clearInputField(s),this._clearInputField(i),this._clearInputField(a)})}_generateMarkup(){return`
        <p class="bottom_half--warning hidden">????</p>
        <h2 class="bottom_half--username_explanation">username (required)</h2>
        <div>
        <span class="username_explanation--tiny">
        Use 12 letters at maximum</span></div>
        <input id="bottom_half--input_username" type="text" placeholder="username" maxlength="12">

        <h2 class="bottom_half--password_explanation">password (required)</h2>
        <p class="password_explanation--tiny">
        8 letters at minimum:  Include more than 1 uppercase, <br>1 lowercase, 1 digit, and 1 special character!</p>
        <input class="input--password" id="bottom_half--input_password" type="password" placeholder="password" minlength="8"><button class="btn--password_visibility btn_password_visibility--login_bottom" type="button"></button>
        <h2 class="bottom_half--email_explanation">email address (optional)</h2>
        <span class="email_explanation--tiny">
        You can set email address in case you forget the password</span>
        <input id="bottom_half--input_email" type="email" placeholder="email address"></input>
        `}}var sq=new sV;class sG extends sD{_parentElement=document.querySelector(".overlay_app_explanation--about_this_web");_addEvents(){this._addEventClickX(),this._addEventClickOutside(),this._addEventClickEscapeClose(this._keyEventRemoveFocus)}_addEventClickX(){this._parentElement.addEventListener("click",e=>{e.target.closest(".btn--x")&&this.close()})}_addEventClickOutside(){this._parentElement.addEventListener("click",e=>{e.target.classList.contains("overlay--app_explanation")&&this.close()})}_keyEventRemoveFocus(){sI._parentElement.querySelectorAll("button").forEach(e=>e.blur())}}var sB=new sG;class sY extends sD{_parentElement=document.querySelector(".top_section");_btnSwitchStyleLeft;_data;type;addHandlerClickSwitch(e){this._parentElement.addEventListener("click",t=>{let s=t.target.closest(".btn--switch");s&&(s.style.left="50%"===s.style.left?"0%":"50%",this._btnSwitchStyleLeft=s.style.left,e("50%"===s.style.left?"goals":"rooms"))})}_changeSwitch(){this._parentElement.querySelector(".btn--switch").style.left="goals"===this.type?"50%":"0%"}addHandlerClickGoals(e){this._parentElement.addEventListener("click",function(t){t.target.closest(".btn--set_goal")&&e()})}addHandlerClickRooms(e){this._parentElement.addEventListener("click",function(t){t.target.closest(".btn--create_room")&&e()})}_addEventClickLogout(){this._parentElement.addEventListener("click",e=>{e.target.closest(".btn--logout")&&sk._asyncInit("message","question",sk._questionLogout,"logout")})}_addHandlerClickIAmSure(e){sk._addHandlerClickIAmSure(null,()=>{"logout"===sk._lastClickedForIAmSure&&e()},null)}_generateMarkup(){let e="goals"===this.type?this._data.howManyTimesClick:this._data.howManyTimesClickRooms,t=e.length?Math.max(...e):0;return`
       <div class="switch--goals_rooms">
        <div class="switch--goals">goals</div>
        <div class="switch--rooms">rooms</div>
        <button class="btn--switch" style="left: ${this._btnSwitchStyleLeft?this._btnSwitchStyleLeft:"50%"}"></button>
      </div>
      <p class="welcome">Welcome<br>${this._data.username}</p>
      <h1 class="title">${this._data.username}'s ${"rooms"===this.type?"".padStart(1,"Â ")+"Rooms":"Days Counter"}</h1>
      <div class="times_to_click">You can click <br>${t} times!</div>
      <button class="btn--set_goal">Goals</button>
      <button class="btn--create_room">Rooms</button>
      <button class="btn--logout">Logout</button>
    `}}var sK=new sY,sW={},sz=y(function(){var e={d:function(t,s){for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return j}});var s={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},i={classes:"",inline:!1,locale:{days:["ÐÐ¾ÑÐºÑÐµÑÐµÐ½ÑÐµ","ÐÐ¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº","ÐÑÐ¾ÑÐ½Ð¸Ðº","Ð¡ÑÐµÐ´Ð°","Ð§ÐµÑÐ²ÐµÑÐ³","ÐÑÑÐ½Ð¸ÑÐ°","Ð¡ÑÐ±Ð±Ð¾ÑÐ°"],daysShort:["ÐÐ¾Ñ","ÐÐ¾Ð½","ÐÑÐ¾","Ð¡ÑÐµ","Ð§ÐµÑ","ÐÑÑ","Ð¡ÑÐ±"],daysMin:["ÐÑ","ÐÐ½","ÐÑ","Ð¡Ñ","Ð§Ñ","ÐÑ","Ð¡Ð±"],months:["Ð¯Ð½Ð²Ð°ÑÑ","Ð¤ÐµÐ²ÑÐ°Ð»Ñ","ÐÐ°ÑÑ","ÐÐ¿ÑÐµÐ»Ñ","ÐÐ°Ð¹","ÐÑÐ½Ñ","ÐÑÐ»Ñ","ÐÐ²Ð³ÑÑÑ","Ð¡ÐµÐ½ÑÑÐ±ÑÑ","ÐÐºÑÑÐ±ÑÑ","ÐÐ¾ÑÐ±ÑÑ","ÐÐµÐºÐ°Ð±ÑÑ"],monthsShort:["Ð¯Ð½Ð²","Ð¤ÐµÐ²","ÐÐ°Ñ","ÐÐ¿Ñ","ÐÐ°Ð¹","ÐÑÐ½","ÐÑÐ»","ÐÐ²Ð³","Ð¡ÐµÐ½","ÐÐºÑ","ÐÐ¾Ñ","ÐÐµÐº"],today:"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ",clear:"ÐÑÐ¸ÑÑÐ¸ÑÑ",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:s.days,minView:s.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):e}function r(){let{tagName:e="div",className:t="",innerHtml:s="",id:i="",attrs:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=document.createElement(e);return t&&r.classList.add(...t.split(" ")),i&&(r.id=i),s&&(r.innerHTML=s),a&&n(r,a),r}function n(e,t){for(let[s,i]of Object.entries(t))void 0!==i&&e.setAttribute(s,i);return e}function o(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function l(e){let t=e.getHours(),{hours:s,dayPeriod:i}=d(t);return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:10>e.getDate()?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:c(t),hours12:s,dayPeriod:i,fullHours12:c(s),minutes:e.getMinutes(),fullMinutes:10>e.getMinutes()?"0"+e.getMinutes():e.getMinutes()}}function d(e){return{dayPeriod:e>11?"pm":"am",hours:e%12==0?12:e%12}}function c(e){return e<10?"0"+e:e}function h(e){let t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function u(){let e=[];for(var t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.forEach(t=>{if("object"==typeof t)for(let s in t)t[s]&&e.push(s);else t&&e.push(t)}),e.join(" ")}function m(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.days;if(!e||!t)return!1;let a=l(e),r=l(t);return({[s.days]:a.date===r.date&&a.month===r.month&&a.year===r.year,[s.months]:a.month===r.month&&a.year===r.year,[s.years]:a.year===r.year})[i]}function p(e,t,s){let i=g(e,!1).getTime(),a=g(t,!1).getTime();return s?i>=a:i>a}function _(e,t){return!p(e,t,!0)}function g(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=new Date(e.getTime());return"boolean"!=typeof t||t||s.setHours(0,0,0,0),s}function y(e,t,s){e.length?e.forEach(e=>{e.addEventListener(t,s)}):e.addEventListener(t,s)}function v(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:v(e.parentNode,t))}function f(e,t,s){return e>s?s:e<t?t:e}function b(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return s.filter(e=>e).forEach(t=>{for(let[s,i]of Object.entries(t))if(void 0!==i&&"[object Object]"===i.toString()){let t=void 0!==e[s]?e[s].toString():void 0,a=i.toString(),r=Array.isArray(i)?[]:{};e[s]=e[s]?t!==a?r:e[s]:r,b(e[s],i)}else e[s]=i}),e}function w(e){let t=e;return e instanceof Date||("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&(e+="T00:00:00"),t=new Date(e)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${e}" to Date object`),t=!1),t}function D(e){let t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}function C(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class k{constructor(){let{type:e,date:t,dp:s,opts:i,body:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),C(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),C(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),C(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),C(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),C(this,"onChangeFocusDate",e=>{if(!e)return void(this.focused&&this.removeFocus());let t=m(e,this.date,this.type);t?this.focus():!t&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),C(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell)),this.type=e,this.singleType=this.type.slice(0,-1),this.date=t,this.dp=s,this.opts=i,this.body=a,this.customData=!1,this.init()}init(){var e,t;let{onRenderCell:s}=this.opts;s&&(this.customData=s({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!=(e=this.customData)&&e.disabled?this.dp.disableDate(this.date):!1===(null==(t=this.customData)?void 0:t.disabled)&&this.dp.enableDate(this.date)}_bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:t,month:s,fullMonth:i,date:a,fullDate:n}=l(this.date),o=(null==(e=this.customData)?void 0:e.attrs)||{};this.$cell=r({attrs:{"data-year":t,"data-month":s,"data-date":a,"data-iso-date":`${t}-${i}-${n}`,...o}}),this.$cell.adpCell=this}_getClassName(){var e;let t=new Date,{selectOtherMonths:i,selectOtherYears:a}=this.opts,{minDate:r,maxDate:n,isDateDisabled:o}=this.dp,{day:d}=l(this.date),c=this._isOutOfMinMaxRange(),h=o(this.date),p=u("air-datepicker-cell",`-${this.singleType}-`,{"-current-":m(t,this.date,this.type),"-min-date-":r&&m(r,this.date,this.type),"-max-date-":n&&m(n,this.date,this.type)}),_="";switch(this.type){case s.days:_=u({"-weekend-":this.dp.isWeekend(d),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!i||c||h});break;case s.months:_=u({"-disabled-":c});break;case s.years:_=u({"-other-decade-":this.isOtherDecade,"-disabled-":c||this.isOtherDecade&&!a})}return u(p,_,null==(e=this.customData)?void 0:e.classes).split(" ")}_getHtml(){var e;let{year:t,month:i,date:a}=l(this.date),{showOtherMonths:r,showOtherYears:n}=this.opts;if(null!=(e=this.customData)&&e.html)return this.customData.html;switch(this.type){case s.days:return!r&&this.isOtherMonth?"":a;case s.months:return this.dp.locale[this.opts.monthsField][i];case s.years:return!n&&this.isOtherDecade?"":t}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{type:i,date:a}=this,{month:r,year:n,date:o}=l(a),d=i===s.days,c=i===s.years,h=!!e&&new Date(n,c?e.getMonth():r,d?o:e.getDate()),u=!!t&&new Date(n,c?t.getMonth():r,d?o:t.getDate());return e&&t?_(h,e)||p(u,t):e?_(h,e):t?p(u,t):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){var e,t,s;let{selectedDates:i,focusDate:a,rangeDateTo:r,rangeDateFrom:n}=this.dp,o=i.length;if(this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),!o)return;let l=n,d=r;if(1===o&&a){let e=p(a,i[0]);l=e?i[0]:a,d=e?a:i[0]}let c=u({"-in-range-":l&&d&&(e=this.date,t=l,s=d,p(e,t)&&_(e,s)),"-range-from-":l&&m(this.date,l,this.type),"-range-to-":d&&m(this.date,d,this.type)});c&&this.$cell.classList.add(...c.split(" "))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){m(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function E(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let S={[s.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${s.days}-"></div>`,[s.months]:`<div class="air-datepicker-body--cells -${s.months}-"></div>`,[s.years]:`<div class="air-datepicker-body--cells -${s.years}-"></div>`},T=".air-datepicker-cell";class L{constructor(e){let{dp:t,type:i,opts:a}=e;E(this,"handleClick",e=>{let t=e.target.closest(T).adpCell;if(t.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let s=this.dp._checkIfDateIsSelected(t.date,t.type);s?this.dp._handleAlreadySelectedDates(s,t.date):this.dp.selectDate(t.date)}),E(this,"handleDayNameClick",e=>{let t=e.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(t),datepicker:this.dp})}),E(this,"onChangeCurrentView",e=>{e!==this.type?this.hide():(this.show(),this.render())}),E(this,"onMouseOverCell",e=>{let t=v(e.target,T);this.dp.setFocusDate(!!t&&t.adpCell.date)}),E(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),E(this,"onClickBody",e=>{let{onClickDayName:t}=this.opts,s=e.target;s.closest(T)&&this.handleClick(e),t&&s.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(e)}),E(this,"onMouseDown",e=>{this.pressed=!0;let t=v(e.target,T),s=t&&t.adpCell;m(s.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),m(s.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),E(this,"onMouseMove",e=>{if(!this.pressed||!this.dp.isMinViewReached)return;e.preventDefault();let t=v(e.target,T),s=t&&t.adpCell,{selectedDates:i,rangeDateTo:a,rangeDateFrom:r}=this.dp;if(!s||s.isDisabled)return;let{date:n}=s;if(2===i.length){if(this.rangeFromFocused&&!p(n,a)){let{hours:e,minutes:t}=l(r);n.setHours(e),n.setMinutes(t),this.dp.rangeDateFrom=n,this.dp.replaceDate(r,n)}if(this.rangeToFocused&&!_(n,r)){let{hours:e,minutes:t}=l(a);n.setHours(e),n.setMinutes(t),this.dp.rangeDateTo=n,this.dp.replaceDate(a,n)}}}),E(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),E(this,"onChangeViewDate",(e,t)=>{if(!this.isVisible)return;let i=h(e),a=h(t);switch(this.dp.currentView){case s.days:if(m(e,t,s.months))return;break;case s.months:if(m(e,t,s.years))return;break;case s.years:if(i[0]===a[0]&&i[1]===a[1])return}this.render()}),E(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(e=>{this.$cells.appendChild(e.render())})}),this.dp=t,this.type=i,this.opts=a,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===s.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:t}=this.opts;y(this.$el,"mouseover",this.onMouseOverCell),y(this.$el,"mouseout",this.onMouseOutCell),y(this.$el,"click",this.onClickBody),e&&t&&(y(this.$el,"mousedown",this.onMouseDown),y(this.$el,"mousemove",this.onMouseMove),y(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=r({className:`air-datepicker-body -${this.type}-`,innerHtml:S[this.type]}),this.$names=a(".air-datepicker-body--day-names",this.$el),this.$cells=a(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",i=this.dp.isWeekend,{onClickDayName:a}=this.opts,r=e,n=0;for(;n<7;){let e=r%7;t+=`<div class="${u("air-datepicker-body--day-name",{[s.cssClassWeekend]:i(e),"-clickable-":!!a})}" data-day-index='${e}'>${this.dp.locale.daysMin[e]}</div>`,n++,r++}return t}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:t,dp:s,opts:i}=this;return new k({type:t,dp:s,opts:i,date:e,body:this})}_generateCells(){L.getDatesFunction(this.type)(this.dp,e=>{this.cells.push(this._generateCell(e))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(e=>e.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,t){let{viewDate:s,opts:{fixedHeight:i},locale:{firstDay:a}}=e,r=o(s),{year:n,month:d}=l(s),c=new Date(n,d,1),h=new Date(n,d,r),u=c.getDay()-a,m=6-h.getDay()+a;u=u<0?u+7:u,m=m>6?m-7:m;let p=function(e,t){let{year:s,month:i,date:a}=l(e);return new Date(s,i,a-t)}(c,u),_=r+u+m,g=p.getDate(),{year:y,month:v}=l(p),f=0;i&&(_=42);let b=[];for(;f<_;){let e=new Date(y,v,g+f);t&&t(e),b.push(e),f++}return b}static getMonthsDates(e,t){let{year:s}=e.parsedViewDate,i=0,a=[];for(;i<12;){let e=new Date(s,i);a.push(e),t&&t(e),i++}return a}static getYearsDates(e,t){let s=h(e.viewDate),i=s[0]-1,a=s[1]+1,r=i,n=[];for(;r<=a;){let e=new Date(r,0);n.push(e),t&&t(e),r++}return n}static getDatesFunction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.days;return({[s.days]:L.getDaysDates,[s.months]:L.getMonthsDates,[s.years]:L.getYearsDates})[e]}}function $(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class M{constructor(e){let{dp:t,opts:s}=e;$(this,"onClickNav",e=>{let t=v(e.target,".air-datepicker-nav--action");if(!t)return;let s=t.dataset.action;this.dp[s]()}),$(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),$(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),$(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),$(this,"update",()=>{let{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()}),$(this,"renderDelay",()=>{setTimeout(this.render)}),$(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(e,t){for(let s in t)t[s]?e.classList.add(s):e.classList.remove(s)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=t,this.opts=s,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=a(".air-datepicker-nav--title",this.$el),this.$prev=a('[data-action="prev"]',this.$el),this.$next=a('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(s.eventChangeTime,this.render))}destroy(){this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(s.eventChangeTime,this.render))}_createElement(){this.$el=r({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:t}=this,s=t.navTitles[e.currentView];return"function"==typeof s?s(e):e.formatDate(e.viewDate,s)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:t,maxDate:i}=this.dp;if(!t&&!i||!e)return;let{year:a,month:r}=this.dp.parsedViewDate,n=!!t&&l(t),o=!!i&&l(i);switch(this.dp.currentView){case s.days:t&&n.month>=r&&n.year>=a&&this._disableNav("prev"),i&&o.month<=r&&o.year<=a&&this._disableNav("next");break;case s.months:t&&n.year>=a&&this._disableNav("prev"),i&&o.year<=a&&this._disableNav("next");break;case s.years:{let e=h(this.dp.viewDate);t&&n.year>=e[0]&&this._disableNav("prev"),i&&o.year<=e[1]&&this._disableNav("next")}}}_disableNav(e){a('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];e.length?e.forEach(e=>{e.classList.remove(...s)}):e.classList.remove(...s)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${t}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find(t=>"function"==typeof e[t])}}var x={today:{content:e=>e.locale.today,onClick:e=>e.setViewDate(new Date)},clear:{content:e=>e.locale.clear,onClick:e=>e.clear()}};class I{constructor(e){let{dp:t,opts:s}=e;this.dp=t,this.opts=s,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=r({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach(e=>{let t=e;"string"==typeof e&&x[e]&&(t=x[e]);let s=this.createButton(t);t.onClick&&this.attachEventToButton(s,t.onClick),this.$el.appendChild(s)})}attachEventToButton(e,t){e.addEventListener("click",()=>{t(this.dp)})}createButton(e){let{content:t,className:s,tagName:i="button",attrs:a={}}=e;return r({tagName:i,innerHtml:`<span tabindex='-1'>${"function"==typeof t?t(this.dp):t}</span>`,className:u("air-datepicker-button",s),attrs:a})}render(){this.generateButtons()}}function A(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class F{constructor(){let{opts:e,dp:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,"toggleTimepickerIsActive",e=>{this.dp.timepickerIsActive=e}),A(this,"onChangeSelectedDate",e=>{let{date:t,updateTime:s=!1}=e;t&&(this.setMinMaxTime(t),this.setCurrentTime(!!s&&t),this.addTimeToDate(t))}),A(this,"onChangeLastSelectedDate",e=>{e&&(this.setTime(e),this.render())}),A(this,"onChangeInputRange",e=>{let t=e.target;this[t.getAttribute("name")]=t.value,this.updateText(),this.dp.trigger(s.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),A(this,"onMouseEnterLeave",e=>{let t=e.target.getAttribute("name"),s=this.$minutesText;"hours"===t&&(s=this.$hoursText),s.classList.toggle("-focus-")}),A(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),A(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=e,this.dp=t;let{timeFormat:i}=this.dp.locale;i&&(i.match(D("h"))||i.match(D("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),y(this.$ranges,e,this.onChangeInputRange),y(this.$ranges,"mouseenter",this.onMouseEnterLeave),y(this.$ranges,"mouseleave",this.onMouseEnterLeave),y(this.$ranges,"focus",this.onFocus),y(this.$ranges,"mousedown",this.onFocus),y(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=r({className:u("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:t,displayHours:s,minutes:i,minHours:a,minMinutes:r,maxHours:n,maxMinutes:o,dayPeriod:l,opts:{hoursStep:d,minutesStep:h}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${c(s)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${c(i)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${l}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${t}" min="${a}" max="${n}" step="${d}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${i}" min="${r}" max="${o}" step="${h}"/>   </div></div>`}defineDOM(){let e=e=>a(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:t,maxDate:s}=this.dp;t&&m(e,t)&&this.setMinTimeFromMinDate(t),s&&m(e,s)&&this.setMaxTimeFromMaxDate(s)}}setCurrentTime(e){let{hours:t,minutes:s}=e?l(e):this;this.hours=f(t,this.minHours,this.maxHours),this.minutes=f(s,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:t,maxHours:s,maxMinutes:i}=this.opts;this.minHours=f(e,0,23),this.minMinutes=f(t,0,59),this.maxHours=f(s,0,23),this.maxMinutes=f(i,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:t}=this.dp;this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:t}=this.dp;this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){n(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,n(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=c(this.displayHours),this.$minutesText.innerHTML=c(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:t,dayPeriod:s}=d(e);this.displayHours=this.ampm?t:e,this.dayPeriod=s}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function H(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class O{constructor(e){let{dp:t,opts:s}=e;H(this,"pressedKeys",new Set),H(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],e=>e.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],e=>e.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],e=>e.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],e=>e.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],e=>e.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],e=>e.year-=10],[["Control","Shift","ArrowUp"],(e,t)=>t.up()]])),H(this,"handleHotKey",e=>{let t=this.hotKeys.get(e),s=l(this.getInitialFocusDate());t(s,this.dp);let{year:i,month:a,date:r}=s,n=o(new Date(i,a));n<r&&(r=n);let d=this.dp.getClampedDate(new Date(i,a,r));this.dp.setFocusDate(d,{viewDateTransition:!0})}),H(this,"isHotKeyPressed",()=>{let e=!1,t=this.pressedKeys.size,s=e=>this.pressedKeys.has(e);for(let[i]of this.hotKeys){if(e)break;if(Array.isArray(i[0]))i.forEach(a=>{e||t!==a.length||(e=a.every(s)&&i)});else{if(t!==i.length)continue;e=i.every(s)&&i}}return e}),H(this,"isArrow",e=>e>=37&&e<=40),H(this,"onKeyDown",e=>{if(!this.dp.visible&&!this.dp.treatAsInline)return;let{key:t,which:s}=e,{dp:i,dp:{focusDate:a},opts:r}=this;this.registerKey(t);let n=this.isHotKeyPressed();if(n)return e.preventDefault(),void this.handleHotKey(n);if(this.isArrow(s))return e.preventDefault(),void this.focusNextCell(t);if("Enter"===t){if(i.currentView!==r.minView)return void i.down();if(a){let e=i._checkIfDateIsSelected(a);return void(e?i._handleAlreadySelectedDates(e,a):i.selectDate(a))}}"Escape"===t&&this.dp.hide()}),H(this,"onKeyUp",e=>{this.removeKey(e.key)}),this.dp=t,this.opts=s,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:t,selectedDates:i,parsedViewDate:{year:a,month:r}}=this.dp,n=e||i[i.length-1];if(!n)switch(t){case s.days:n=new Date(a,r,(new Date).getDate());break;case s.months:n=new Date(a,r,1);break;case s.years:n=new Date(a,0,1)}return n}focusNextCell(e){let t=this.getInitialFocusDate(),{currentView:i}=this.dp,{days:a,months:r,years:n}=s,o=l(t),d=o.year,c=o.month,h=o.date;switch(e){case"ArrowLeft":i===a&&(h-=1),i===r&&(c-=1),i===n&&(d-=1);break;case"ArrowUp":i===a&&(h-=7),i===r&&(c-=3),i===n&&(d-=4);break;case"ArrowRight":i===a&&(h+=1),i===r&&(c+=1),i===n&&(d+=1);break;case"ArrowDown":i===a&&(h+=7),i===r&&(c+=3),i===n&&(d+=4)}let u=this.dp.getClampedDate(new Date(d,c,h));this.dp.setFocusDate(u,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}function R(e,t,s){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:String(i))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let P="",N="",U=!1;class j{static buildGlobalContainer(e){U=!0,P=r({className:e,id:e}),a("body").appendChild(P)}constructor(e,t){var n=this;if(R(this,"viewIndexes",[s.days,s.months,s.years]),R(this,"next",()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(e,t+1,1));break;case s.months:this.setViewDate(new Date(e+1,t,1));break;case s.years:this.setViewDate(new Date(e+10,0,1))}}),R(this,"prev",()=>{let{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(e,t-1,1));break;case s.months:this.setViewDate(new Date(e-1,t,1));break;case s.years:this.setViewDate(new Date(e-10,0,1))}}),R(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),R(this,"setPosition",function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(e=e||n.opts.position))return void(n.customHide=e({$datepicker:n.$datepicker,$target:n.$el,$pointer:n.$pointer,isViewChange:t,done:n._finishHide}));let s,i,{isMobile:a}=n.opts,r=n.$el.getBoundingClientRect(),o=n.$el.getBoundingClientRect(),l=n.$datepicker.offsetParent,d=n.$el.offsetParent,c=n.$datepicker.getBoundingClientRect(),h=e.split(" "),u=window.scrollY,m=window.scrollX,p=n.opts.offset,_=h[0],g=h[1];if(a)n.$datepicker.style.cssText="left: 50%; top: 50%";else{if(l===d&&l!==document.body&&(o={top:n.$el.offsetTop,left:n.$el.offsetLeft,width:r.width,height:n.$el.offsetHeight},u=0,m=0),l!==d&&l!==document.body){let e=l.getBoundingClientRect();o={top:r.top-e.top,left:r.left-e.left,width:r.width,height:r.height},u=0,m=0}switch(_){case"top":s=o.top-c.height-p;break;case"right":i=o.left+o.width+p;break;case"bottom":s=o.top+o.height+p;break;case"left":i=o.left-c.width-p}switch(g){case"top":s=o.top;break;case"right":i=o.left+o.width-c.width;break;case"bottom":s=o.top+o.height-c.height;break;case"left":i=o.left;break;case"center":/left|right/.test(_)?s=o.top+o.height/2-c.height/2:i=o.left+o.width/2-c.width/2}n.$datepicker.style.cssText=`left: ${i+m}px; top: ${s+u}px`}}),R(this,"_setInputValue",()=>{let{opts:e,$altField:t,locale:{dateFormat:s}}=this,{altFieldDateFormat:i,altField:a}=e;a&&t&&(t.value=this._getInputValue(i)),this.$el.value=this._getInputValue(s),this.$el.dispatchEvent(new Event("change"))}),R(this,"_getInputValue",e=>{let{selectedDates:t,opts:s}=this,{multipleDates:i,multipleDatesSeparator:a}=s;if(!t.length)return"";let r="function"==typeof e,n=r?e(i?t:t[0]):t.map(t=>this.formatDate(t,e));return r?n:n.join(a)}),R(this,"_checkIfDateIsSelected",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.days,i=!1;return n.selectedDates.some(s=>{let a=m(e,s,t);return i=a&&s,a}),i}),R(this,"_scheduleCallAfterTransition",e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),R(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),R(this,"setViewDate",e=>{if(!((e=w(e))instanceof Date)||m(e,this.viewDate))return;let t=this.viewDate;this.viewDate=e;let{onChangeViewDate:i}=this.opts;if(i){let{month:e,year:t}=this.parsedViewDate;i({month:e,year:t,decade:this.curDecade})}this.trigger(s.eventChangeViewDate,e,t)}),R(this,"setFocusDate",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=w(e))instanceof Date)&&(n.focusDate=e,n.trigger(s.eventChangeFocusDate,e,t))}),R(this,"setCurrentView",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.viewIndexes.includes(e)){if(n.currentView=e,n.elIsInput&&n.visible&&n.setPosition(void 0,!0),n.trigger(s.eventChangeCurrentView,e),!n.views[e]){let t=n.views[e]=new L({dp:n,opts:n.opts,type:e});n.shouldUpdateDOM&&n.$content.appendChild(t.$el)}n.opts.onChangeView&&!t.silent&&n.opts.onChangeView(e)}}),R(this,"_updateLastSelectedDate",e=>{this.lastSelectedDate=e,this.trigger(s.eventChangeLastSelectedDate,e)}),R(this,"destroy",()=>{if(this.isDestroyed)return;let{showEvent:e,isMobile:t}=this.opts,s=this.$datepicker.parentNode;s&&s.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0}),R(this,"update",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=b({},n.opts),{silent:a}=t;b(n.opts,e);let{timepicker:r,buttons:o,range:l,selectedDates:d,isMobile:c}=n.opts,h=n.visible||n.treatAsInline;n._createMinMaxDates(),n._limitViewDateByMaxMinDates(),n._handleLocale(),d&&(n.selectedDates=[],n.selectDate(d,{silent:a})),e.view&&n.setCurrentView(e.view,{silent:a}),n._setInputValue(),i.range&&!l?(n.rangeDateTo=!1,n.rangeDateFrom=!1):!i.range&&l&&n.selectedDates.length&&(n.rangeDateFrom=n.selectedDates[0],n.rangeDateTo=n.selectedDates[1]),i.timepicker&&!r?(h&&n.timepicker.destroy(),n.timepicker=!1,n.$timepicker.parentNode.removeChild(n.$timepicker)):!i.timepicker&&r&&n._addTimepicker(),!i.buttons&&o?n._addButtons():i.buttons&&!o?(n.buttons.destroy(),n.$buttons.parentNode.removeChild(n.$buttons)):h&&i.buttons&&o&&n.buttons.clearHtml().render(),!i.isMobile&&c?(n.treatAsInline||N||n._createMobileOverlay(),n._addMobileAttributes(),n.visible&&n._showMobileOverlay()):i.isMobile&&!c&&(n._removeMobileAttributes(),n.visible&&(N.classList.remove("-active-"),"function"!=typeof n.opts.position&&n.setPosition())),h&&(n.nav.update(),n.views[n.currentView].render(),n.currentView===s.days&&n.views[n.currentView].renderDayNames())}),R(this,"disableDate",(e,t)=>{(Array.isArray(e)?e:[e]).forEach(e=>{let s=w(e);if(!s)return;this.disabledDates[t?"delete":"add"](this.formatDate(s,"yyyy-MM-dd"));let i=this.getCell(s,this.currentViewSingular);i&&i.adpCell.render()},[])}),R(this,"enableDate",e=>{this.disableDate(e,!0)}),R(this,"isDateDisabled",e=>{let t=w(e);return this.disabledDates.has(this.formatDate(t,"yyyy-MM-dd"))}),R(this,"isOtherMonth",e=>{let{month:t}=l(e);return t!==this.parsedViewDate.month}),R(this,"isOtherYear",e=>{let{year:t}=l(e);return t!==this.parsedViewDate.year}),R(this,"isOtherDecade",e=>{let{year:t}=l(e),[s,i]=h(this.viewDate);return t<s||t>i}),R(this,"_onChangeSelectedDate",e=>{let{silent:t}=e;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()})}),R(this,"_onChangeFocusedDate",function(e){let{viewDateTransition:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;let s=!1;t&&(s=n.isOtherMonth(e)||n.isOtherYear(e)||n.isOtherDecade(e)),s&&n.setViewDate(e),n.opts.onFocus&&n.opts.onFocus({datepicker:n,date:e})}),R(this,"_onChangeTime",e=>{let{hours:t,minutes:s}=e,i=new Date,{lastSelectedDate:a,opts:{onSelect:r}}=this,n=a;a||(n=i);let o=this.getCell(n,this.currentViewSingular),l=o&&o.adpCell;l&&l.isDisabled||(n.setHours(t),n.setMinutes(s),a?(this._setInputValue(),r&&this._triggerOnSelect()):this.selectDate(n))}),R(this,"_onFocus",e=>{this.visible||this.show()}),R(this,"_onBlur",e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),R(this,"_onMouseDown",e=>{this.inFocus=!0}),R(this,"_onMouseUp",e=>{this.inFocus=!1,this.$el.focus()}),R(this,"_onResize",()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()}),R(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),R(this,"getViewDates",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.days;return L.getDatesFunction(e)(n)}),R(this,"isWeekend",e=>this.opts.weekends.includes(e)),R(this,"getClampedDate",e=>{let{minDate:t,maxDate:s}=this,i=e;return s&&p(e,s)?i=s:t&&_(e,t)&&(i=t),i}),this.$el=a(e),!this.$el)return;this.$datepicker=r({className:"air-datepicker"}),this.opts=b({},i,t),this.$customContainer=!!this.opts.container&&a(this.opts.container),this.$altField=a(this.opts.altField||!1);let{view:o,startDate:d}=this.opts;d||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=w(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=o,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:t,opts:{inline:s,isMobile:i,selectedDates:r,keyboardNav:n,onlyTimepicker:o}}=this,l=a("body");U&&(!U||!P||l.contains(P))||s||!this.elIsInput||this.$customContainer||j.buildGlobalContainer(j.defaultGlobalContainerId),!i||N||t||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(s||this._bindEvents(),n&&!o&&(this.keyboardNav=new O({dp:this,opts:e}))),r&&this.selectDate(r,{silent:!0}),this.opts.visible&&!t&&this.show(),i&&!t&&this.$el.setAttribute("readonly",!0),t&&this._createComponents()}_createMobileOverlay(){N=r({className:"air-datepicker-overlay"}),P.appendChild(N)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:s,buttons:i,timepicker:a,position:r,classes:n,onlyTimepicker:o,isMobile:l}}=this;this._buildBaseHtml(),this.elIsInput&&(s||this._setPositionClasses(r)),!s&&this.elIsInput||this.$datepicker.classList.add("-inline-"),n&&this.$datepicker.classList.add(...n.split(" ")),o&&this.$datepicker.classList.add("-only-timepicker-"),l&&!t&&this._addMobileAttributes(),this.views[this.currentView]=new L({dp:this,type:this.currentView,opts:e}),this.nav=new M({dp:this,opts:e}),a&&this._addTimepicker(),i&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){N.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){N.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:e,maxDate:t}=this.opts;this.minDate=!!e&&w(e),this.maxDate=!!t&&w(t)}_addTimepicker(){this.$timepicker=r({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new F({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=r({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new I({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(s.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(s.eventChangeFocusDate,this._onChangeFocusedDate),this.on(s.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){var e,t;let{inline:s}=this.opts;this.elIsInput?s?(e=this.$datepicker,(t=this.$el).parentNode.insertBefore(e,t.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=a(".air-datepicker--content",this.$datepicker),this.$pointer=a(".air-datepicker--pointer",this.$datepicker),this.$nav=a(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:t,firstDay:s,timepicker:i,onlyTimepicker:a,timeFormat:r,dateTimeSeparator:n}=this.opts;this.locale=JSON.parse(JSON.stringify(e)),t&&(this.locale.dateFormat=t),void 0!==r&&""!==r&&(this.locale.timeFormat=r);let{timeFormat:o}=this.locale;if(""!==s&&(this.locale.firstDay=s),i&&"function"!=typeof t){let e=o?n:"";this.locale.dateFormat=[this.locale.dateFormat,o||""].join(e)}a&&"function"!=typeof t&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if("function"==typeof e)return void this.$datepicker.classList.add("-custom-position-");let t=(e=e.split(" "))[0],s=`air-datepicker -${t}-${e[1]}- -from-${t}-`;this.$datepicker.classList.add(...s.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:t,maxDate:s}=this;s&&p(e,s)&&this.setViewDate(s),t&&_(e,t)&&this.setViewDate(t)}formatDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,t=arguments.length>1?arguments[1]:void 0;if(!((e=w(e))instanceof Date))return;let s=t,i=this.locale,a=l(e),r=a.dayPeriod,n=h(e),o=j.replacer;for(let[t,l]of Object.entries({T:e.getTime(),m:a.minutes,mm:a.fullMinutes,h:a.hours12,hh:a.fullHours12,H:a.hours,HH:a.fullHours,aa:r,AA:r.toUpperCase(),E:i.daysShort[a.day],EEEE:i.days[a.day],d:a.date,dd:a.fullDate,M:a.month+1,MM:a.fullMonth,MMM:i.monthsShort[a.month],MMMM:i.months[a.month],yy:a.year.toString().slice(-2),yyyy:a.year,yyyy1:n[0],yyyy2:n[1]}))s=o(s,D(t),l);return s}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:a,parsedViewDate:r,selectedDates:n}=this,{updateTime:o,silent:l}=i,{moveToOtherMonthsOnSelect:d,moveToOtherYearsOnSelect:c,multipleDates:h,range:u,autoClose:m,onBeforeSelect:_}=this.opts,g=n.length;if(Array.isArray(e))return e.forEach(e=>{this.selectDate(e,i)}),new Promise(e=>{setTimeout(e)});if((e=w(e))instanceof Date){if(_&&!l&&!_({date:e,datepicker:this}))return Promise.resolve();if(a===s.days&&e.getMonth()!==r.month&&d&&(t=new Date(e.getFullYear(),e.getMonth(),1)),a===s.years&&e.getFullYear()!==r.year&&c&&(t=new Date(e.getFullYear(),0,1)),t&&this.setViewDate(t),h&&!u){if(g===h)return;this._checkIfDateIsSelected(e)||n.push(e)}else if(u)switch(g){case 1:n.push(e),this.rangeDateTo||(this.rangeDateTo=e),p(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,silent:null==i?void 0:i.silent,date:e,updateTime:o}),this._updateLastSelectedDate(e),m&&!this.timepickerIsActive&&this.visible&&(h||u?u&&1===g&&this.hide():this.hide()),new Promise(e=>{setTimeout(e)})}}unselectDate(e){let t=this.selectedDates,i=this;if((e=w(e))instanceof Date)return t.some((a,r)=>{if(m(a,e))return t.splice(r,1),i.selectedDates.length?(i.rangeDateTo="",i.rangeDateFrom=t[0],i._updateLastSelectedDate(i.selectedDates[i.selectedDates.length-1])):(i.rangeDateFrom="",i.rangeDateTo="",i._updateLastSelectedDate(!1)),this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,date:e}),!0})}replaceDate(e,t){let i=this.selectedDates.find(t=>m(t,e,this.currentView)),a=this.selectedDates.indexOf(i);a<0||m(this.selectedDates[a],t,this.currentView)||(this.selectedDates[a]=t,this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,date:t,updateTime:!0}),this._updateLastSelectedDate(t))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,silent:e.silent}),new Promise(e=>{setTimeout(e)})}show(){let{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:t}=this.opts,s=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(t=>{this.customHide||(!t||!s)&&(t||s)||this._finishHide(),e&&e(t)}),t&&N.classList.remove("-active-")}_triggerOnSelect(){let e=[],t=[],{selectedDates:s,locale:i,opts:{onSelect:a,multipleDates:r,range:n}}=this,o=r||n,l="function"==typeof i.dateFormat;s.length&&(e=s.map(g),t=l?r?i.dateFormat(e):e.map(e=>i.dateFormat(e)):e.map(e=>this.formatDate(e,i.dateFormat))),a({date:o?e:e[0],formattedDate:o?t:t[0],datepicker:this})}_handleAlreadySelectedDates(e,t){let{selectedDates:s,rangeDateFrom:i,rangeDateTo:a}=this,{range:r,toggleSelected:n}=this.opts,o=s.length,l="function"==typeof n?n({datepicker:this,date:t}):n,d=!!(r&&1===o&&e),c=d?g(t):t;r&&!l&&(2!==o&&this.selectDate(c),2===o&&m(i,a))||(l?this.unselectDate(c):this._updateLastSelectedDate(d?c:e))}_handleUpDownActions(e,t){if(!((e=w(e||this.focusDate||this.viewDate))instanceof Date))return;let s="up"===t?this.viewIndex+1:this.viewIndex-1;s>2&&(s=2),s<0&&(s=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[s])}getCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.day;if(!((e=w(e))instanceof Date))return;let{year:i,month:a,date:r}=l(e),n=`[data-year="${i}"]`,o=`[data-month="${a}"]`,d={[s.day]:`${n}${o}[data-date="${r}"]`,[s.month]:`${n}${o}`,[s.year]:`${n}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(d[t]):void 0}_showMobileOverlay(){N.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((e,t)=>parseFloat(t)+e,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return l(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return h(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===s.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===s.days}get $container(){return this.$customContainer||P}static replacer(e,t,s){return e.replace(t,function(e,t,i,a){return t+s+a})}}return R(j,"defaults",i),R(j,"version","3.6.0"),R(j,"defaultGlobalContainerId","air-datepicker-global-container"),Object.assign(j.prototype,{on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter(e=>e!==t))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];this.__events&&this.__events[e]&&this.__events[e].forEach(e=>{e(...s)})}}),t.default}()),sJ={};Object.defineProperty(sJ,"__esModule",{value:!0}),sJ.default=void 0,sJ.default={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0};class sX extends sD{_parentElement=document.querySelector(".days_counter--container");_deleteGoalRoomIndex;_eventAttached;_data;type;_addEvents(){this._addEventClickCopy(),this._addEventMouseoverUsers(),this._addEventMouseoutUsers(),this._addEventClickDelete(),this._addEventClickCard()}_addEventClickCopy(){this._parentElement.addEventListener("click",async e=>{try{let t=e.target.closest(".btn--room_id_copy");if(!t)return;let s=t.closest(".card"),i=+s.dataset.card,a=this._data.rooms[i].roomId;await navigator.clipboard.writeText(a);let r=s.querySelector(".copied_explanation");t.classList.add("room_id--copied"),this.open(r),await this._setTimeout(),t.classList.remove("room_id--copied"),this.close(r)}catch(e){sk._asyncInit("message","error",sk._errorMessageUnableToCopy)}})}_addEventMouseoverUsers(){this._parentElement.addEventListener("mouseover",e=>{this._usernamesContainers=Array.from(this._parentElement.querySelectorAll(".usernames_container"));let t=e.target.closest(".btn--usernames");if(!t)return;let s=+t.dataset.btnUsernames;this._usernamesContainers[s].style.opacity=1})}_addEventMouseoutUsers(){this._parentElement.addEventListener("mouseout",e=>{let t=e.target.closest(".btn--usernames");if(!t)return;let s=+t.dataset.btnUsernames;this._usernamesContainers[s].style.opacity=0})}_addHandlerClickEdit(e){this._parentElement.addEventListener("click",t=>{let s=t.target.closest(".btn--edit");s&&e(+s.closest(".card").dataset.card,this.type)})}_addEventClickDelete(){this._parentElement.addEventListener("click",e=>{let t=e.target.closest(".btn--delete");if(!t)return;let s=+t.closest(".card").dataset.card;this._deleteGoalRoomIndex=s,sk._asyncInit("message","question",`Are you sure you want to delete this ${"goals"===this.type?"goal":"room"}?`,"delete")})}_addHandlerIAmSure(e){sk._addHandlerClickIAmSure(()=>{let t;if("delete"===sk._lastClickedForIAmSure&&(this._deleteGoalRoomIndex||0===this._deleteGoalRoomIndex)){if("rooms"===this.type){let e=this._data.rooms[this._deleteGoalRoomIndex];t=this._data.goals.find(t=>t.title===e.title&&t.date===e.date&&t.selected)}e(this._deleteGoalRoomIndex,this.type,t,"daysCounter")}})}_addEventClickCard(){this._parentElement.addEventListener("click",e=>{let t=e.target.closest(".card");!t||e.target.closest(".usernames_container")||e.target.closest(".room_id_container")||sZ._eventClickCardSlide(e,t)})}_addEventModifiedInside(){this._parentElement.addEventListener("input",e=>{sZ._inputEventModifiedInside(e)})}addHandlerClickOutside(e){sL._parentElement.addEventListener("click",t=>{sZ._clickOutside(t,e)})}_handleHidden(){let e=this._parentElement.querySelectorAll(".room_id_container"),t=Array.from(this._parentElement.querySelectorAll(".btn--usernames"));e.forEach((e,s)=>{let i=t[s];"goals"===this.type?e.classList.add("hidden"):e.classList.remove("hidden"),"goals"===this.type?i.classList.add("hidden"):i.classList.remove("hidden")})}_generateMarkup(){let e="goals"===this.type?this._data.goals:this._data.rooms;return(this._setDaysCounterStyle(e.length),e.length)?e.map((e,t)=>{let s="goals"===this.type?this._data.remainingDaysPrev[t]:this._data.remainingDaysPrevRooms[t],i=`
        <div class="room_id_container hidden">
          <span class="room_id">Room ID: ${e?.roomId}</span> 
          <button class="btn--room_id_copy"></button>
          <span class="copied_explanation hidden">copied!</span>
        </div>
        <div class="usernames_container" data-usernames="${t}">
        <p class="usernames_explanation">There are ${e?.usernames?.length} users in this room </p>
        <span class="usernames"> ${e?.usernames?.join(", ")} </span>
        </div>
        <button class="btn--usernames hidden" data-btn-usernames="${t}">users</button>
        `;return`
        <div class="card" data-card="${t}">
            ${i}
            
            <div class="title--outer">
            <h2>${e?.title?e.title:"No title is set!"}</h2>
            </div>
      
            <div class="btns--edit_delete btns_edit_delete--days_counter">
            <button class="btn--edit" data-edit="${t}">Edit</button>
            <button class="btn--delete" data-delete="${t}">Delete</button>
            </div>
            <div class="bottom_content  bottom_content--days_counter">
            <div class="remaining_days--outer">
            <div class="remaining_days">${s||0===s?s:"  "}</div>
            </div>
            <p>days</p>
            <div class="details--outer">
            <div class="details details--card">
                <span>${s||0===s?`${s} days are ${(s/7).toFixed(1)} weeks`:""}</span>
                <span>${s||0===s?`${s} days are ${(s/(365/12)).toFixed(1)} months`:"No date is set!"}</span>
                <spam>${s||0===s?`${s} days are ${(s/365).toFixed(1)} years`:""}</spam>
            </div>
            </div>
          </div>
          <div class="to_do_lists to_do_lists--days_counter  hidden" contenteditable="true">
            <div class="checkbox_container">
            <input type="checkbox" id="checkbox0">
            Let's add To-Do lists here!
            </div>
          </div>
          <div class="comments comments--days_counter hidden" contenteditable="true">
            Let's add comments here!
          </div>
          </div>
       `}).join(""):`
         <p class="start_explanation">Let's first start by setting your ${this.type}!</p>`}_setDaysCounterStyle(e){this._parentElement.style.display=e?"grid":"block",this._parentElement.style.gridTemplateColumns=e?"repeat(2, 1fr)":"none"}init(e){e&&(this._data=e),this._handleHidden(),sZ._init(this.type,"daysCounter",this._data),sZ._toDoListsContainers=this._parentElement.querySelectorAll(".to_do_lists"),sZ._commentsContainers=this._parentElement.querySelectorAll(".comments"),sZ._renderContenteditable(),this._eventAttached||(sZ._addEventCheckbox(),this._addEventModifiedInside(),this._eventAttached=!0)}}var sQ=new sX,sZ=new class{_maxPage=2;_toDoListsContainers;_commentsContainers;_curCard;_curCardPage;_pages;_lastModifiedCardToDoLists;_lastModifiedCardComments;_checkedOrNotArr;_contenteditableType;_data;type;_eventClickCardSlide(e,t){!(e.target.closest('[contenteditable="true"]')||e.target.closest("button"))&&(this._lastModifiedCardToDoLists||0===this._lastModifiedCardToDoLists||this._lastModifiedCardComments||0===this._lastModifiedCardComments||(this._curCard="daysCounter"===this._contenteditableType?+t.dataset.card:+t.dataset.slide,this._curCardPage=this._pages[this._curCard],this._changePages(),this._changeTitle(t),this._handleHidden(t)))}_changePages(){this._curCardPage=this._curCardPage===this._maxPage?0:++this._curCardPage,this._pages.fill(this._curCardPage,this._curCard,this._curCard+1)}_changeTitle(e){let t;if("slide"===this._contenteditableType)return;let s="goals"===this.type?this._data.goals[this._curCard].title:this._data.rooms[this._curCard].title;0===this._curCardPage&&(t=s||"No title is set!"),1===this._curCardPage&&(t="To-Do lists"),2===this._curCardPage&&(t="Comments"),e.querySelector("h2").textContent=t}_handleHidden(e){let t=e.querySelector(".bottom_content");[t,e.querySelector(".to_do_lists"),e.querySelector(".comments")].forEach((e,t)=>{e.classList.remove("hidden"),this._curCardPage!==t&&e.classList.add("hidden")});let s=e.querySelector(".btn--edit");0===this._curCardPage?s.classList.remove("hidden"):s.classList.add("hidden")}_inputEventModifiedInside(e){this._setLastModifiedAndCheckedArr(e),this._removeUnecessaryBrCheckbox(e)}_setLastModifiedAndCheckedArr(e){let t=e.target.closest(".to_do_lists"),s=e.target.closest(".comments");(t||s)&&("daysCounter"===this._contenteditableType&&(t&&(this._lastModifiedCardToDoLists=+t.closest(".card").dataset.card),s&&(this._lastModifiedCardComments=+s.closest(".card").dataset.card)),"slide"===this._contenteditableType&&(t&&(this._lastModifiedCardToDoLists=+t.closest(".slide").dataset.slide),s&&(this._lastModifiedCardComments=+s.closest(".slide").dataset.slide)),t&&this._setCheckedOrNotArr(t))}_setCheckedOrNotArr(e){let t=Array.from(e.querySelectorAll('input[type="checkbox"]'));this._checkedOrNotArr=t.map(e=>e.checked)}_removeUnecessaryBrCheckbox(e){e.target.querySelectorAll(".checkbox_container").forEach(e=>{"<br>"===e.innerHTML&&e.remove()})}_addEventCheckbox(){this._toDoListsContainers.forEach(e=>{e.addEventListener("keydown",t=>{if("Enter"!==t.key||1!==this._curCardPage)return;let s=e.textContent;this._generateCheckbox(s,e,this._checkedOrNotArr)})})}_generateCheckbox(e,t,s){let i=e.split("\n").map(e=>e.trim()).filter(e=>e);i.push(""),t.innerHTML="";let a=i.map((e,t)=>`
      <div class="checkbox_container">
      <input type="checkbox" id="checkbox${t}"  ${s?.at(t)?"checked":""}>
      ${e}
      </div>
      `).join("");t.insertAdjacentHTML("afterbegin",a),this._highlightLastLine(t.lastChild)}_highlightLastLine(e){let t=document.createRange();t.setStartAfter(e),t.setEndAfter(e);let s=window.getSelection();s.removeAllRanges(),s.addRange(t)}_clickOutside(e,t){if(!("daysCounter"===this._contenteditableType?e.target.closest(".page--main"):e.target.closest(".overlay"))||e.target.closest('[contenteditable="true"]')||!this._lastModifiedCardToDoLists&&0!==this._lastModifiedCardToDoLists&&!this._lastModifiedCardComments&&0!==this._lastModifiedCardComments)return;let s=this._toDoListsContainers[this._lastModifiedCardToDoLists],i=this._commentsContainers[this._lastModifiedCardComments],a=s?this._lastModifiedCardToDoLists:this._lastModifiedCardComments;t(this.type,a,s?.textContent,this._checkedOrNotArr,i?.innerHTML),this._lastModifiedCardToDoLists=null,this._lastModifiedCardComments=null}_renderContenteditable(){("goals"===this.type?this._data.goals:this._data.rooms).forEach((e,t)=>{this._generateCheckbox(e.toDoLists,this._toDoListsContainers[t],e.toDoListsCheckbox),this._renderComments(e.comments,this._commentsContainers[t])})}_renderComments(e,t){e&&(t.innerHTML=e,this._highlightLastLine(t.lastChild))}_resetAllToFirst(e){this._resetAllCardsToFirst(e),this._resetAllTitleToFirst(e),this._resetAllBtnEditToFirst(e)}_resetAllCardsToFirst(e){let t=e.querySelectorAll(".bottom_content"),s=e.querySelectorAll(".to_do_lists"),i=e.querySelectorAll(".comments");t.forEach((e,t)=>{e.classList.remove("hidden"),s[t].classList.add("hidden"),i[t].classList.add("hidden")})}_resetAllTitleToFirst(e){if("slide"===this._contenteditableType)return;let t=("goals"===this.type?this._data.goals:this._data.rooms).map(e=>e?.title);e.querySelectorAll("h2").forEach((e,s)=>{e.textContent=t[s]||"No title is set!"})}_resetAllBtnEditToFirst(e){e.querySelectorAll(".btn--edit").forEach(e=>e.classList.remove("hidden"))}_init(e,t,s){this.type=e,this._contenteditableType=t,this._data=s,this._pages=Array("goals"===this.type?this._data.goals.length:this._data.rooms.length).fill(0)}};class s0{_parentElement=sS._parentElement;_data;_curAccGoalLength;_allSlides;_type;async _submit(e){try{this._allSlides=ie._allSlides;let t=Array.from(this._allSlides).map(e=>{let t=e.querySelector("#input--goal_title")?.value,s=e.querySelector("#input--goal_date")?.value;if(t||s)return{title:t||"",date:s||"",comments:"",toDoLists:"",toDoListsCheckbox:[]}}).filter(e=>e&&(e.date||e.title));if(0===t.length)return;e(t,this._type)}catch(e){throw e}}_generateMarkup(){return this._data=ie._data,this._curAccGoalLength=ie._curAccGoalLength,this._type=ie.type,`
        <div class="overlay_in--set_goal">
         <button class="btn--x set_goal--btn_x" type="button">&times;</button>
         <h1>${this._curAccGoalLength<10?"Let's set your goals! </h1> <p>You can set up to 10 goals!":"You have maximum number of goals!</h1> <p>You already have 10 goals!"}</p>
         <div class="slider">
          ${this._createSlider()}
          <button class="slider--btn btn--left" type="button">&larr;</button>
          <button class="slider--btn btn--right" type="button">&rarr;</button>
          <div class="dots">${this._createDots()}</div>
         </div>
         <button class="btn--next slider--btn_next">&larr;</button>
        </div>`}_createSlider(){let e=[];for(let t=0;t<10;t++){let s=this._data.goals[t]?.title,i=this._data.goals[t]?.date;e.push(`
           <div class="slide" data-slide="${t}">
            <h2>Goal No.${t+1}</h2>

            <div class="btns--edit_delete btns_edit_delete--slide ${this._curAccGoalLength>t?"":"hidden"} ">
            <button class="btn--edit" data-edit="${t}" type="button">Edit</button>
            <button class="btn--delete" data-delete="${t}" type="button">Delete</button>
            </div>

            <div class="bottom_content">
            <div class="goal_title">
              <p>${this._curAccGoalLength>t?"The":"Set the"} name of your goal No.${t+1}!</p>
              ${this._curAccGoalLength>t?`<p class="set_goal_title">${s||"No title yet"}</p>`:'<input id="input--goal_title" type="text" placeholder="Goal title"></input>'}
            </div>
            <div class="goal_date">
             <p>${this._curAccGoalLength>t?"The":"Set the"} date of your goal No.${t+1}!</p>
             ${this._curAccGoalLength>t?`<p class="set_goal_date">${i||"No date yet"}</p>`:`<input id="input--goal_date" class="datepicker${t}" type="text" placeholder="Click here to select date"></input>`}
             </div>
            </div>
           <div class="to_do_lists
           to_do_lists--slide hidden" contenteditable="true">
            <div class="checkbox_container">
            <input type="checkbox" id="checkbox0">
            Let's add To-Do lists here!
            </div>
           </div>
           <div class="comments comments--slide hidden" contenteditable="true">
            Let's add comments here!
           </div>
           </div>`)}return e.join("")}_createDots(){let e=[];for(let t=0;t<10;t++)e.push(`<button class="dots_dot" data-dot = "${t}" type="button"></button>`);return e.join("")}}var s1=new s0;let s2=(e=21)=>{let t="",s=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[e]];return t};class s4{_parentElement=sS._parentElement;_data;_curAccRoomLength;_allSlides;_type;_roomType;async _submit(e){try{this._allSlides=ie._allSlides;let t=Array.from(this._allSlides).map(e=>{let t=e.querySelector("#input--goal_title")?.value,s=e.querySelector("#input--goal_date")?.value;if(t||s)return{roomId:s2(),title:t||"",date:s||"",comments:"",toDoLists:"",toDoListsCheckbox:[]}}).filter(e=>e&&(e.date||e.title));if(0===t.length)return;e(t,this._type,this._roomType)}catch(e){throw e}}_generateMarkup(){return this._data=ie._data,this._curAccRoomLength=this._data.rooms.length,this._type=ie.type,this._roomType=ie.roomType,`
        <div class="overlay_in--set_goal">
         <button class="btn--x set_goal--btn_x" type="button">&times;</button>
         <h1>${10!==this._curAccRoomLength?"Let's create your rooms! </h1> <p>You can create up to 10 rooms!":"You have maximum number of rooms!</h1> <p>You already have 10 rooms!"}</p>
         <div class="slider">
          ${this._createSlider()}
          <button class="slider--btn btn--left" type="button">&larr;</button>
          <button class="slider--btn btn--right" type="button">&rarr;</button>
          <div class="dots">${this._createDots()}</div>
         </div>
         <button class="btn--next slider--btn_next">&larr;</button>
        </div>`}_createSlider(){let e=[];for(let t=0;t<10;t++){let s=this._data.rooms[t]?.title,i=this._data.rooms[t]?.date;e.push(`
           <div class="slide" data-slide="${t}">
            <h2>Room No.${t+1}</h2>
            <div class="btns--edit_delete btns_edit_delete--slide ${this._curAccRoomLength>t?"":"hidden"}">
            <button class="btn--edit" data-edit="${t}" type="button">Edit</button>
            <button class="btn--delete" data-delete="${t}" type="button">Delete</button>
            </div>
            <div class="bottom_content">
            <div class="goal_title">
              <p>${this._curAccRoomLength>t?"The":"Set the"} name of your room No.${t+1}!</p>
              ${this._curAccRoomLength>t?`<p class="set_goal_title">${s||"No title yet"}</p>`:'<input id="input--goal_title" type="text" placeholder="Room title"></input>'}
            </div>
            <div class="goal_date">
             <p>${this._curAccRoomLength>t?"The":"Set the"} date of your room No.${t+1}!</p>
             ${this._curAccRoomLength>t?`<p class="set_goal_date">${i||"No date yet"}</p>`:`<input id="input--goal_date" class="datepicker${t}" type="text" placeholder="Click here to select date"></input>`}
            </div>
            </div>
            <div class="to_do_lists to_do_lists--slide hidden" contenteditable="true">
             <div class="checkbox_container">
              <input type="checkbox" id="checkbox0">
              Let's add To-Do lists here!
             </div>
            </div>
            <div class="comments comments--slide hidden" contenteditable="true">
             Let's add comments here!
            </div>
           </div>
           `)}return e.join("")}_createDots(){let e=[];for(let t=0;t<10;t++)e.push(`<button class="dots_dot" data-dot = "${t}" type="button"></button>`);return e.join("")}}var s3=new s4;class s7{_parentElement=sS._parentElement;_curAccGoalLength;_allSlides;_data;_type;_roomType;_select(e){let t=e.target.closest(".btn--select");t&&(t.classList.toggle("btn--select__active"),t.textContent=t.classList.contains("btn--select__active")?"Selected":"Create room with this")}async _submit(e,t){try{this._allSlides=ie._allSlides;let s=Array.from(this._parentElement.querySelectorAll(".btn--select__active"));if(!s.length)return;s.forEach(e=>{e.classList.add("permanent")});let i=this._newSelectedGoalsIndex(s);await t(i);let a=i.map(e=>{let t=this._allSlides[e],s=t.querySelector(".set_goal_title"),i=t.querySelector(".set_goal_date"),a="No title yet"===s.textContent?"":s.textContent,r="No date yet"===i.textContent?"":i.textContent;return{roomId:s2(),title:a,date:r,comments:"",toDoLists:"",toDoListsCheckbox:""}});if(!a.length)return;e(a,this._type,this._roomType)}catch(e){throw e}}_newSelectedGoalsIndex(e){return e.map(e=>+e.dataset.select).filter(e=>!this._data.goals[e].selected)}_goalsSelected(e){return!!this._data.goals[e].selected}_generateMarkup(){return this._data=ie._data,this._curAccGoalLength=ie._curAccGoalLength,this._type=ie.type,this._roomType=ie.roomType,`
        <div class="overlay_in--set_goal">
         <button class="btn--x set_goal--btn_x" type="button">&times;</button>
         <h1>${0!==this._curAccGoalLength?"Let's create your rooms!</h1> <p>You can create up to 10 rooms!":"You haven't set goals yet!</h1> <p>Create rooms from scratch or set goals first!"}</p>
         <div class="slider">
          ${this._createSlider()}
          <button class="slider--btn btn--left" type="button">&larr;</button>
          <button class="slider--btn btn--right" type="button">&rarr;</button>
          <div class="dots">${this._createDots()}</div>
         </div>
         <button class="btn--next slider--btn_next">&larr;</button>
        </div>`}_createSlider(){let e=[];for(let t=0;t<this._curAccGoalLength;t++)e.push(`
           <div class="slide" data-goto="${t}">
            <h2>Goal No.${t+1}</h2>
            <button class=${this._goalsSelected(t)?"btn--select__active permanent":"btn--select"} data-select="${t}" type="button"> ${this._goalsSelected(t)?"Already have":"Create room with this"}</button>
            <div class="goal_title">
              <p> The name of your goal No.${t+1}!</p>
              <p class="set_goal_title">${this._data.goals[t]?.title}</p>
            </div>
            <div class="goal_date">
             <p>The date of your goal No.${t+1}!</p>
             <p class="set_goal_date">${this._data.goals[t]?.date}</p>
            </div>
           </div>`);return e.join("")}_createDots(){let e=[];for(let t=0;t<this._curAccGoalLength;t++)e.push(`<button class="dots_dot" data-dot = "${t}" type="button"></button>`);return e.join("")}}var s5=new s7;class s6{_parentElement=sS._parentElement;_data;_curAccRoomLength;_slideMax;_allSlides;_type;_roomType;async _submit(e){this._allSlides=ie._allSlides;let t=this._data.rooms.map(e=>e.roomId),s=Array.from(this._allSlides).map(e=>e?.querySelector("#input--id")?.value.trim());s.forEach(e=>{e&&21!==e.length&&sk._asyncInit("message","error",sk._errorMessageInvalidId),e&&t.includes(e)&&sk._asyncInit("message","error",sk._errorMessageRoomAlreadyExists)});let i=s.filter(e=>e&&21===e.length&&!t.includes(e));i.length&&e(i,this._type,this._roomType)}_generateMarkup(){return this._data=ie._data,this._curAccRoomLength=this._data.rooms.length,this._type=ie.type,this._roomType=ie.roomType,this._slideMax=10-this._data.rooms.length,`
            <div class="overlay_in--set_goal">
             <button class="btn--x set_goal--btn_x" type="button">&times;</button>
             <h1>${10!==this._curAccRoomLength?`Let's join rooms! </h1> <p>You can join up to 10 rooms! (You can still set ${this._slideMax} more rooms!)`:"You have maximum number of rooms!</h1> <p>You already have 10 rooms!"}</p>
             <div class="slider">
              ${this._createSlider()}
              <button class="slider--btn btn--left" type="button">&larr;</button>
              <button class="slider--btn btn--right" type="button">&rarr;</button>
              <div class="dots">${this._createDots()}</div>
             </div>
             <button class="btn--next slider--btn_next">&larr;</button>
            </div>`}_createSlider(){let e=[];for(let t=0;t<this._slideMax;t++)e.push(`
               <div class="slide" data-goto="${t}">
                <h3>Please enter room id</h3>
                 <input id="input--id" type="text" placeholder="Room ID"></input>
               </div>`);return e.join("")}_createDots(){let e=[];for(let t=0;t<this._slideMax;t++)e.push(`<button class="dots_dot" data-dot="${t}" type="button"></button>`);return e.join("")}}var s8=new s6;class s9 extends sD{_parentElement=sS._parentElement;_allSlides;_currentSlide;_curAccGoalLength;_editGoalRoomIndex;_deleteGoalRoomIndex;_message;_errorMessage="Something went wrong. Please try again this later!";_eventAttached;_data;type;roomType;_addEvents(){this._addEventClickSlide(),this._addEventClickRight(),this._addEventClickLeft(),this._addEventArrowKey(),this._addEventClickDot(),this._addEventClickEdit(),this._addEventClickDelete(),this._addEventClickSelect()}_addEventClickSlide(){this._parentElement.addEventListener("click",e=>{let t=e.target.closest(".slide");if(!t||"select"===this.roomType||"id"===this.roomType||t.querySelector(".btn--finish"))return;let s=+t.dataset.slide;("goals"!==this.type||this._data.goals[s])&&("rooms"!==this.type||this._data.rooms[s])&&(e.target.closest('input[type="text"]')||sZ._eventClickCardSlide(e,t))})}_addEventClickRight(){this._parentElement.addEventListener("click",e=>{e.target.closest(".btn--right")&&this._goToNext()})}_addEventClickLeft(){this._parentElement.addEventListener("click",e=>{e.target.closest(".btn--left")&&this._goToPrev()})}_addEventArrowKey(){document.addEventListener("keydown",e=>{Array.from(this._parentElement.querySelectorAll("input")).filter(e=>"checkbox"!==e.type).map(e=>document.activeElement===e).some(e=>!0===e)||("ArrowRight"===e.key&&this._goToNext(),"ArrowLeft"===e.key&&this._goToPrev())})}_addEventClickDot(){this._parentElement.addEventListener("click",e=>{let t=e.target.closest(".dots_dot");t&&(this._currentSlide=+t.dataset.dot,this._goToSlide(+t.dataset.dot),this._activeDot())})}_addEventClickEdit(){this._parentElement.addEventListener("click",e=>{let t=e.target.closest(".btn--edit");if(!t)return;let s=+t.closest(".slide").dataset.slide;this._changeGoalRoomForEdit(s)})}_changeGoalRoomForEdit(e){this._editGoalRoomIndex=e;let t=this._allSlides[e],s=this.type.slice(0,4),i=t.querySelector(".set_goal_title").textContent,a=t.querySelector(".set_goal_date").textContent,r=`
      <h2>${"goals"===this.type?"Goal":"Room"} No.${e+1}</h2>
      <div class="btns--edit_delete btns_edit_delete--slide">
      <button class="btn--finish" data-finish="${e}" type="button">Finish</button>
      <button class="btn--delete" data-delete="${e}" type="button">Delete</button>
      </div>
      <div class="bottom_content">
      <div class="goal_title">
        <p>Edit the name of your ${s} No.${e+1}!</p>
        <input id="input--goal_title" type="text" placeholder="${s} title"></input>
      </div>
      <div class="goal_date">
        <p>Edit the date of your ${s} No.${e+1}!</p>
        <input id="input--goal_date" class="datepicker${e}" type="text" placeholder="Click here to select date"></input>
      </div>
      </div>`;this.render(t,r),t.querySelector("#input--goal_title").value="No title yet"===i?"":i,t.querySelector("#input--goal_date").value="No date yet"===a?"":a,this._setDatePickerOne(e),this._parentElement.querySelector(".slider--btn_next").classList.add("hidden")}_addHandlerClickFinishEditing(e){this._parentElement.addEventListener("click",t=>{let s=t.target.closest(".btn--finish");if(!s)return;let i=s.closest(".slide"),a=i.querySelector("#input--goal_title").value.trim(),r=i.querySelector("#input--goal_date").value.trim();if(!a&&!r)return;let n="goals"===this.type?this._data.goals[this._editGoalRoomIndex]:this._data.rooms[this._editGoalRoomIndex],o={title:a||"",date:r||"",comments:n.comments||"",toDoLists:n.toDoLists||"",toDoListsCheckbox:n.toDoListsCheckbox||[]};"rooms"===this.type&&(o={roomId:n.roomId,usernames:n.usernames||[],...o}),e(this._editGoalRoomIndex,o,this.type),this._editGoalRoomIndex=null})}_addEventClickDelete(){this._parentElement.addEventListener("click",e=>{let t=e.target.closest(".btn--delete");if(!t)return;let s=+t.closest(".slide").dataset.slide;this._deleteGoalRoomIndex=s,sk._asyncInit("message","question",`Are you sure you want to delete this ${"goals"===this.type?"goal":"room"}?`)})}_addEventClickSelect(){this._parentElement.addEventListener("click",function(e){s5._select(e)})}addHandlerClickX(e){sS.addHandlerClickX(()=>{e(),this._editGoalRoomIndex=null,this._deleteGoalRoomIndex=null})}addHandlerClickOutside(e){sS.addHandlerClickOutside(()=>{e(),this._editGoalRoomIndex=null,this._deleteGoalRoomIndex=null})}_addHandlerClickEscapeClose(e){this._addEventClickEscapeClose(this._keyEventRemoveFocus,e)}_keyEventRemoveFocus(){sL._parentElement.querySelectorAll("button").forEach(e=>e.blur())}_addHandlerIAmSure(e){sk._addHandlerClickIAmSure(()=>{let t;if(this._deleteGoalRoomIndex||0===this._deleteGoalRoomIndex){if("rooms"===this.type){let e=this._data.rooms[this._deleteGoalRoomIndex];t=this._data.goals.find(t=>t.title===e.title&&t.date===e.date&&t.selected)}e(this._deleteGoalRoomIndex,this.type,t,"slide"),this._deleteGoalRoomIndex=null}})}addHandlerSubmit(e,t){this._parentElement.addEventListener("click",s=>{if(s.target.closest(".slider--btn_next")){if("goals"===this.type)return s1._submit(e);if("rooms"===this.type&&"create"===this.roomType)return s3._submit(e);if("rooms"===this.type&&"select"===this.roomType)return s5._submit(e,t);s8._submit(e)}})}_addEventModifiedInside(){this._parentElement.addEventListener("input",e=>{sZ._inputEventModifiedInside(e)})}_addEventStopPropagationCheckbox(){this._parentElement.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation()})})}addHandlerClickOutsideContenteditable(e){this._parentElement.addEventListener("click",t=>{sZ._clickOutside(t,e)})}_slideMax(){let e;return("goals"===this.type||"rooms"===this.type&&"create"===this.roomType)&&(e=10),"rooms"===this.type&&"select"===this.roomType&&(e=this._curAccGoalLength),"rooms"===this.type&&"id"===this.roomType&&(e=10-this._data.rooms.length),e}_goToNext(){this._currentSlide===this._slideMax()-1?this._currentSlide=0:this._currentSlide++,this._goToSlide(this._currentSlide),this._activeDot()}_goToPrev(){0===this._currentSlide?this._currentSlide=this._slideMax()-1:this._currentSlide--,this._goToSlide(this._currentSlide),this._activeDot()}_generateMarkup(){return(this._curAccGoalLength=this._data.goals.length,"goals"===this.type)?s1._generateMarkup(this._data):"rooms"===this.type&&"create"===this.roomType?s3._generateMarkup(this._data):"rooms"===this.type&&"select"===this.roomType?s5._generateMarkup(this._data):s8._generateMarkup(this._data)}_goToSlide(e=this._currentSlide){this._allSlides=document.querySelectorAll(".slide"),this._allSlides.forEach((t,s)=>t.style.transform=`translateX(${100*(s-e)}%)`)}_activeDot(){document.querySelectorAll(".dots_dot").forEach(e=>{e.classList.remove("dots_dot--active"),e.blur(),this._currentSlide===+e.dataset.dot&&e.classList.add("dots_dot--active")})}_setDatePicker(){for(let e=0;e<10;e++)new sz(`.datepicker${e}`,{startDate:new Date,locale:y(sJ),position:"top right"})}_setDatePickerOne(e){new sz(`.datepicker${e}`,{startDate:new Date,locale:y(sJ),position:"top right"})}init(e,t){this._currentSlide=0,this.renderToParentEle(e),this._goToSlide(t),this._setDatePicker(),this._activeDot(),"select"!==this.roomType&&"id"!==this.roomType&&(sZ._init(this.type,"slide",this._data),sZ._toDoListsContainers=this._parentElement.querySelectorAll(".to_do_lists"),sZ._commentsContainers=this._parentElement.querySelectorAll(".comments"),sZ._renderContenteditable(),this._eventAttached||(sZ._addEventCheckbox(),this._addEventStopPropagationCheckbox(),this._addEventModifiedInside(),this._eventAttached=!0))}}var ie=new s9;class it extends sD{overlayView=sS;_parentElement=sS._parentElement;addHandlerClickX(e){this.overlayView.addHandlerClickX(e)}addHandlerClickOutside(e){this.overlayView.addHandlerClickOutside(e)}addHandlerClick(e,t,s,i){this._parentElement.addEventListener("click",function(a){return a.target.closest(".btn--from_scratch")?e():a.target.closest(".btn--from_you_have")?t():void(a.target.closest(".btn--from_id")&&s(),a.target.closest(".btn--join_rooms")&&i())})}_generateMarkup(){return`
      <div class="overlay_in--how_to_create">
        <button class="btn--x how_to_create--btn_x">&times;</button>
        <h1>What do you want to do today?</h1>
        <div class="btn_container--create_rooms">
        <h2>Create rooms</h2>
          <button class="btn--from_scratch">From scratch</button>
          <button class="btn--from_you_have">From the goal you already set</button>
          <button class="btn--from_id">Join a room with an id</button>
        </div>
        `}}var is=new it;class ii extends sD{_parentElement=document.querySelector(".overlay_app_explanation--how_to_use");_addEvents(){this._addEventClickX(),this._addEventClickOutside(),this._addEventClickEscapeClose(this._keyEventRemoveFocus)}_addEventClickX(){this._parentElement.addEventListener("click",e=>{e.target.closest(".btn--x")&&this.close()})}_addEventClickOutside(){this._parentElement.addEventListener("click",e=>{e.target.classList.contains("overlay--app_explanation")&&this.close()})}_keyEventRemoveFocus(){sL._parentElement.querySelectorAll("button").forEach(e=>e.blur())}}var ia=new ii;const ir=function(){e=null},io=function(t){sK.type=sQ.type=sL.type=t,sK.renderToParentEle(e),sK._changeSwitch(),sQ.renderToParentEle(e),sQ.init(),sL.init(e)},il=async function(t,s){try{sk._asyncInit("spinner"),await sw.login(t,s),e=sw._curUser,sR._resetLogingForm(),sI.close(),io("goals"),sk.close(),sL.open(),sA._setTimeoutLogout()}catch(e){if(sk.close(),404===e.statusCode)return sR.renderError(sR._errorMessageWrong);if(429===e.statusCode)return sk._asyncInit("message","error",e.message);console.error(e),sk._asyncInit("message","error",sk._errorMessage)}},id=async function(t,s,i){try{sk._asyncInit("spinner"),await sw.createUser({username:t,password:s,email:i}),e=sw._curUser,sK.type=sQ.type=sL.type="goals",sK.renderToParentEle(e),sQ.renderToParentEle(e),sL.init(e),sI.close(),await sk._asyncInit("message","message",sk._messageCreateAcc),sL.open(),sA._setTimeoutLogout()}catch(e){if(sk.close(),"ValidationError"===e.name||"ExpressValidatorError"===e.name||"DuplicateUserInfo"===e.name)return sq.renderError(e.message);if(429===e.statusCode)return sk._asyncInit("message","error",e.message);console.error(e),sk._asyncInit("message","error",sk._errorMessage)}},ic=async function(){try{sA._resetSetTimeoutLogout(),await sw.logout(),ir(),await sk._asyncInit("message","message",sk._messageLogout),sM.close(),sS.close(),sL.close(),sI.open()}catch(e){console.error(e),sk._asyncInit("message","error",sk._errorMessageLogout)}},ih=async function(t,s,i){try{sA._resetSetTimeoutLogout(),sk._asyncInit("spinner"),await sw.editGoalRoom(t,s,i),e=sw._curUser,io(i),await sk._asyncInit("message","message",`${i.at(0).toUpperCase()+i.slice(1,4)} updated successfully!`),ie.init(e)}catch(e){sA._resetSetTimeoutLogout(),console.error(e),sk._asyncInit("message","error",sk._errorMessage)}},iu=async function(t,s,i=null,a){try{if(sA._resetSetTimeoutLogout(),sk._asyncInit("spinner"),"rooms"===s&&i&&await sw.removeSelected(i),"goals"===s?await sw.deleteGoal(t):await sw.deleteRoom(t),e=sw._curUser,await sk._asyncInit("message","message",`${s.at(0).toUpperCase()+s.slice(1,4)} deleted successfully!`),"daysCounter"===a)return io(s);ie.init(e)}catch(e){sA._resetSetTimeoutLogout(),console.error(e),sk._asyncInit("message","error",sk._errorMessage)}},im=async function(t,s,i=null,a=null,r=null){try{sA._resetSetTimeoutLogout(),await sw.saveToDoListsComments(t,s,i,a,r),e=sw._curUser}catch(e){sA._resetSetTimeoutLogout(),console.error(e),sk._asyncInit("message","error",`Server error while saving ${i?"To-Do lists":"comments"} \u{1F647}\u{200D}\u{2642}\u{FE0F} <br> Please try again this later!`)}},ip=async function(t){try{sA._resetSetTimeoutLogout(),await sw.updateRemainingDaysPrev(t),await sw.saveHowManyTimesClick(t),e=sw._curUser,sK.renderToParentEle(e),sQ.renderToParentEle(e),sQ._handleHidden(),sL.init(e)}catch(e){sA._resetSetTimeoutLogout(),console.error(e),sk._asyncInit("message","error",sk._errorMessage)}},i_=function(){sA._resetSetTimeoutLogout(),ie.close(),sQ.init(e),sZ._resetAllToFirst(sQ._parentElement)},ig=async function(t){try{sA._resetSetTimeoutLogout(),sk._asyncInit("spinner"),await sw.saveSelectedGoals(t),e=sw._curUser}catch(e){sA._resetSetTimeoutLogout(),console.error(e),sk._asyncInit("message","error",`Server error while creating room${goalsOrRoomsInfo.length>=2?"s":""} \u{1F647}\u{200D}\u{2642}\u{FE0F} <br> Please try again this later!`)}},iy=async function(t,s,i=null){try{sA._resetSetTimeoutLogout(),sk._asyncInit("spinner"),"goals"===s?await sw.saveGoalsInfo(t):await sw.saveRoomsInfo(t,i),e=sw._curUser,io(s),ie.type=s,i&&(ie.roomType=i),await sk._asyncInit("message","message",`${s.at(0).toUpperCase()}${t.length>=2?s.slice(1):s.slice(1,4)} created successfully!`),ie.init(e)}catch(e){if(sA._resetSetTimeoutLogout(),404===e.statusCode)return sk._asyncInit("message","error",sk._errorMessageRoomNotFound);sk._asyncInit("message","error",`Server error while creating ${t.length>=2?s:s.slice(0,4)} \u{1F647}\u{200D}\u{2642}\u{FE0F} <br> Please try again this later!`)}},iv=async function(t,s,i,a){try{sA._resetSetTimeoutLogout(),sk._asyncInit("spinner"),await sw._updatePassword(t,s),sM.renderInit(e),await sk._asyncInit("message","message",sM._message)}catch(e){if(sA._resetSetTimeoutLogout(),"ValidationError"===e.name||"ExpressValidatorError"===e.name)return sk.close(),sM.renderError(e.message),sM.renderErrorInputField(i),sM.renderErrorInputField(a);console.error(e),sk._asyncInit("message","error",sk._errorMessage)}},ib=async function(t,s,i){try{if(sA._resetSetTimeoutLogout(),sk._asyncInit("spinner"),await sw._updateUsernameEmail(t,s),e=sw._curUser,sM.renderInit(e),sM.renderMessage(),await sk._asyncInit("message","message",sM._message),"username"!==s)return;sK.renderToParentEle(e)}catch(e){if(sA._resetSetTimeoutLogout(),"ValidationError"===e.name||"ExpressValidatorError"===e.name||"DuplicateUserInfo"===e.name)return sk.close(),sM.renderError(e.message),sM.renderErrorInputField(i);console.error(e),sk._asyncInit("message","error",sk._errorMessage)}};sH._addEventClickPasswordVisibility(),sI._addHandlerClickAppExplanation(function(){sB.open(),sB._addEvents()}),sR.addHandlerSubmit(il),sR.addHandlerClickForgotPassword(function(){sI.close(),sN.openSlow()}),sN.addHandlerClickClose(function(){sN.closeSlow(),sI.open()}),sN.addHandlerSubmit(function(e){console.log("email input sent",e)}),sj.addHandlerClick(function(){sq.open(),sq.renderInit()}),sq.addHandlerSubmit(id),sL.addHandlerClickCounter(ip),sL._addHandlerClickHowToUse(function(){sA._resetSetTimeoutLogout(),ia.open(),ia._addEvents()}),sL.addHandlerClickSetting(function(){sA._resetSetTimeoutLogout(),sL.close(),sM.renderInit(e),sM.open()}),sK.addHandlerClickSwitch(function(e){sA._resetSetTimeoutLogout(),io(e)}),sK.addHandlerClickGoals(function(){sA._resetSetTimeoutLogout(),ie.type="goals",ie.init(e),ie.open()}),sK.addHandlerClickRooms(function(){sA._resetSetTimeoutLogout(),ie.type="rooms",is.renderToParentEle(),is.open()}),sK._addEventClickLogout(),sK._addHandlerClickIAmSure(ic),sQ._addEvents(),sQ._addHandlerClickEdit(function(t,s){sA._resetSetTimeoutLogout(),ie.type=s,"rooms"===s&&(ie.roomType="create"),ie.init(e,t),ie._changeGoalRoomForEdit(t),ie.open()}),sQ._addHandlerIAmSure(iu),sQ.addHandlerClickOutside(im),ie._addEvents(),ie.addHandlerClickX(i_),ie.addHandlerClickOutside(i_),ie._addHandlerClickEscapeClose(i_),ie._addHandlerClickFinishEditing(ih),ie._addHandlerIAmSure(iu),ie.addHandlerClickOutsideContenteditable(im),ie.addHandlerSubmit(iy,ig),is.addHandlerClick(function(){sA._resetSetTimeoutLogout(),ie.roomType="create",ie.init(e),ie.open()},function(){sA._resetSetTimeoutLogout(),ie.roomType="select",ie.init(e),ie.open()},function(){sA._resetSetTimeoutLogout(),ie.roomType="id",ie.init(e),ie.open()}),sM.addHandlerClickX(function(){sA._resetSetTimeoutLogout(),sM.close(),sL.open()}),sM.addEventClickChange(),sM.addHandlerClickFinish(iv,ib),sk._addEvents();
//# sourceMappingURL=Client.528e79ee.js.map
